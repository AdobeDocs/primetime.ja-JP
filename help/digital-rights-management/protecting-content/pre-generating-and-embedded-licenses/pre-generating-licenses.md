---
description: Adobe Primetime DRM Professional を使用している場合は、ライセンスを事前に生成し、コンテンツにライセンスを埋め込むことができます。 この機能は、拡張ライセンスチェーニングと組み合わせて、Leaf ライセンスが事前に生成され、コンテンツに埋め込まれ、クライアントがライセンスサーバーからルートライセンス（マシンまたはドメインにバインド）を要求できます。 また、クライアントアプリケーションは、デバイスがサーバに事前登録され、サーバがそのデバイスにバインドされたライセンスを事前に生成し、クライアントが単純な HTTP Web サーバからライセンスを取得するワークフローを実装できます。
title: ライセンスの事前生成
source-git-commit: 02ebc3548a254b2a6554f1ab34afbb3ea5f09bb8
workflow-type: tm+mt
source-wordcount: '611'
ht-degree: 0%

---

# ライセンスの事前生成 {#pre-generating-licenses}

Adobe Primetime DRM Professional を使用している場合は、ライセンスを事前に生成し、コンテンツにライセンスを埋め込むことができます。 この機能は、拡張ライセンスチェーニングと組み合わせて、Leaf ライセンスが事前に生成され、コンテンツに埋め込まれ、クライアントがライセンスサーバーからルートライセンス（マシンまたはドメインにバインド）を要求できます。 また、クライアントアプリケーションは、デバイスがサーバに事前登録され、サーバがそのデバイスにバインドされたライセンスを事前に生成し、クライアントが単純な HTTP Web サーバからライセンスを取得するワークフローを実装できます。

ライセンスを事前に生成する場合は、 `com.adobe.flashaccess.sdk.license.pregen.LicenseFactory.getInstance()` 例を得る `LicenseFactory`. このファクトリで生成されたライセンスに署名するには、ライセンスサーバーの資格情報を指定する必要があります。 このクラスは、ライセンスチェーニングを行わずに Leaf ライセンスを生成し、 [強化されたライセンスチェーニング](../../protecting-content/implementing-the-license-server/license-chaining/gen-enhanced-license-chaining.md).

Leaf ライセンスを生成する場合は、適用するコンテンツメタデータを指定する必要があります `initContentInfo()`. メタデータに複数の DRM ポリシーが含まれる場合、またはメタデータに含まれていない DRM ポリシーを使用する場合は、 `setSelectedPolicy()` をクリックして、ライセンスを生成する DRM ポリシーを指定します。 DRM ポリシー更新リストを使用して DRM ポリシーの更新を追跡する場合、メタデータを初期化する前に DRM ポリシー更新リストをライセンスファクトリに提供することができます。 `setPolicyUpdateList()`.

ルートライセンスを生成する場合は、前述のようにコンテンツのメタデータを指定する必要があります。 または、DRM ポリシー ( `setSelectedPolicy()`) とライセンスサーバ URL ( `setLicenseServerURL()`) を使用します。

>[!NOTE]
>
>クライアントがライセンスを要求できるAdobe Primetime DRM ライセンスサーバーがない場合でも、ライセンスサーバー URL が必要です。 この場合、ライセンスサーバ URL は、ライセンス発行者を識別する URL を指定する必要があります。

DRM ポリシーで拡張ライセンスチェーニングを使用する場合は、ライセンスサーバーの資格情報を指定して、DRM ポリシーのルート暗号化キーを復号化する必要があります ( `setRootKeyRetrievalInfo()`) をクリックします。

DRM ポリシーでドメインバインドライセンスが必要な場合は、 `setDomainCAs()` をクリックして、ライセンスサーバーがドメイントークンを受け入れるドメイン発行者を指定します。 ライセンス受信者を検証するには、1 つ以上のドメイン CA 証明書を提供する必要があります。

DRM ポリシーでiOSデバイスのリモートキー配信が必要な場合は、適用してキーサーバー証明書を指定する必要があります `setKeyServerCertificate()` 連鎖したリーフが生成されていない限り。

ライセンスを生成する場合は、を呼び出す必要があります。 `generateLicense()` ライセンスの種類（リーフまたはルート）と 1 つ以上の受信者証明書を指定します。 受信者の証明書は、DRM ポリシーで指定されている要件に応じて、コンピューターの証明書またはドメインの証明書を表します。 連鎖したリーフを生成する場合、受信者は不要です。 ライセンスが生成されたら、DRM ポリシーで指定された使用ルールを上書きできます。 最後に、を呼び出す必要があります。 `signLicense()` ライセンスに署名してインスタンスを取得するには `PreGeneratedLicense`. ライセンスを保存できます ( `getBytes()` ：シリアル化されたライセンスを取得するか、暗号化されたコンテンツに埋め込まれます。

詳しくは、 [ライセンスの埋め込み](../../protecting-content/pre-generating-and-embedded-licenses/embedding-licenses.md).

詳しくは、 `com.adobe.flashaccess.samples.licensegen.GenerateLicense` 事前に生成されたライセンスのデモ方法に関するサンプルコードについては、リファレンス実装コマンドラインツールの「samples」ディレクトリを参照してください。
