---
description: 基本的なクエリパラメーターの他に、オプションのクエリパラメーターを使用すると、マニフェストサーバーが異なるクライアントや状況で機能するようになります。
seo-description: 基本的なクエリパラメーターの他に、オプションのクエリパラメーターを使用すると、マニフェストサーバーが異なるクライアントや状況で機能するようになります。
seo-title: クライアントおよび状況別のオプションのクエリパラメーター
title: クライアントおよび状況別のオプションのクエリパラメーター
uuid: e3fae41e-9f7d-4f01-9a01-52a1d5f5dad5
translation-type: tm+mt
source-git-commit: 358c5b02d47f23a6adbc98e457e56c8220cae6e9

---


# クライアントおよび状況別のオプションのクエリパラメーター {#optional-query-parameters-by-client-and-situation}

基本的なクエリパラメーターの他に、オプションのクエリパラメーターを使用すると、マニフェストサーバーが異なるクライアントや状況で機能するようになります。

## Akamai Ad Scalerを使用した広告挿入 {#section_120FEC75C34D4F4587B77D842166D68A}

Akamaiコンテンツ配信ネットワーク(CDN)では、Akamai Edgeサーバーがクライアントとマニフェストサーバーの間の仲介として機能します。 Ad Scalerも使用する場合、パラメーターとクエ `ptassetid` リパラメ `live` ーターによってAkamai Edgeに必要な情報が提供されます。

パラメ `ptassetid` ーターは、そのアセットの発行者IDです。 Akamaiは、リクエストURLの一部として指定したbase64エンコードURLではなく、このURLを使用して、広告挿入用にマニフェストサーバーに提供するプレイリストを識別します。

このパラ `live` メーターは、ライブコンテンツとビデオオンデマンド(VOD)を区別します。 マニフェストサーバーは、Akamaiとの合理化されたインターフェイスをサポートするために、この情報を必要とします。

Akamaiに関するパラメーターを示すサンプルURLを次に示します。

```
https://. . .master.m3u8?. . .&ptassetid=pubAsset&live=true
```

## Xbox上のTVSDKからの広告挿入 {#section_5DB405F4647240A0B83E72DE35D5EC80}

Xbox上のPrimetime TVSDKに基づくプレイヤーは、基本的なパラメーター以外のクエリパラメーターを追加で提供する必要はありません。

## Safariを使用したiOS上のTVSDKからの広告挿入 {#section_250E493A125E4F82940D19C7DA2AAB2E}

Safariブラウザーを使用するiOS上のPrimetime TVSDKに基づくプレイヤーは、基本的なクエリパラメーターに加えて、パラ `ptplayer` メーターと `live` パラメーターを指定する必要があります。

マニフェストサーバーは値を認 `ptplayer` 識し、 `ios-mobileweb` 返される広告関連付けされたマニフェストからプリロールを削除します。

このパラメ `live` ーターは、マニフェストサーバーに対して、ライブコンテンツを返すか、VODコンテンツを返すかを指示します。

Safariを使用するiOSに関連するパラメーターを示すURLの例を次に示します。

```
https://. . .master.m3u8?. . .&ptplayer=ios-mobileweb&live=false
```

## カスタム広告キュー形式を使用した広告挿入 {#section_82AF880AAABE4BD4B593D906434D4D89}

アドビでは、Primetimeパッケージで直接サポートされない広告キュー形式の名前を提供しています。 このような形式を使用するには、アドビが提供する名前をパラメーターの値として指定 `ptcueformat` します。

カスタム広告キュー形式を指定するサンプルURLを次に示します。

```
https://. . .master.m3u8?. . .&ptcueformat=[custom format name]
```

## 広告キューを使用したVOD用のFreeWheelタイムラインの作成 {#section_E0D830F5EEE24639819B975B90F6999F}

解析してFreeWheel広告リクエストに含める広告キューを含むVODコンテンツの場合、パラメーターの値をに設 `ptcueformat` 定しま `DPIsimple`す。

VODにFreeWheelタイムラインを使用する方法を指定するサンプルURLを次に示します。

```
https://. . .master.m3u8?. . .&ptcueformat=DPISimple&live=false
```

## VODのカスタムタイムラインを使用した広告挿入 {#section_F398F7659164463FA886A4CC787C7B5A}

指定したタイムラインに従って、マニフェストサーバーに広告をVODコンテンツに挿入するように依頼するには、パラメーターの値をタ `pttimeline` イムラインを指定する文字列に設定します。 「 [VODタイムラインの形式」を参照](../../msapi-topics/ms-changes-vod-timeline/ms-api-timeline-format.md)

VODのカスタムタイムラインを使用するサンプルURLを次に示します。

```
https://. . .master.m3u8?. . .&live=false&pttimeline=B,60,2,p;C,120,1;B,30,2,m;C,300,1
```

最大2つの広告を含む1分の最初の時間を指定し、その後に2分のコンテンツセグメントが続き、30秒の時間に続いて2つの広告を含み、その後に5分のコンテンツセグメントが続きます。

VODコンテンツのカスタムコンテンツタイムラインの広告ステッチは、次のように動作します。

* 広告は、広告サーバーで指定された広告配置時間の後で最も近い時間の境界に表示されます。
* セグメントの長さは2秒以上です。

## TSセグメントの認証 {#section_BF855A4399DC42CB8C0586113A416BBC}

アドビでは、この機能をAkamai CDNに対してのみサポートしています。 HTTPライブストリーミング(HLS)は、ストリームレベルのM3U8プレイリストを使用して、トランスポートストリーム(TS)セグメントを配信します。 複数のストリームレベルの再生リストが、バリアントM3U8プレイリストでクライアントに提供される。 クライアントはバリアントリストから1つのプレイリストストリームを選択し、そのストリームレベルプレイリストのTSセグメントを1つずつダウンロードします。 通常の操作では、要求されたコンテンツにcookie認証が必要になる場合があります。この認証は、マニフェストサーバーがバックグラウンドで見えなく処理します。 この関数は、生のコンテンツからcookieを抽出し、選択したプレイリストストリームのリクエストに使用する適切なトークンをURLに追加します。

ブートストラップURLクエリのパラメー `pttoken=true`ターにが含まれる場合、パブリッシャーは、ストリーム全体に対して1回だけではなく、各TSセグメントのリクエストでcookieを使用する必要があります。 マニフェストサーバーは、このcookieをクエリパラメーターとしてストリームプレイリスト内の各TSセグメントURLに添付し、それが返送します。
