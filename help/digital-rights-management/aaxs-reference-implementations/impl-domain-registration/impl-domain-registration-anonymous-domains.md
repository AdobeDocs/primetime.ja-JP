---
seo-title: 匿名ドメイン
title: 匿名ドメイン
uuid: ee29ae4d-65b2-48de-b441-18c8cf55de32
translation-type: tm+mt
source-git-commit: 4f196bbd079edeb1a423afee6b4b7e249d380f40
workflow-type: tm+mt
source-wordcount: '380'
ht-degree: 0%

---


# 匿名ドメイン {#anonymous-domains}

この場合、多数のデバイスが1つのドメインに属し、認証が必要でない場合があります。 参照実装でこの種類のドメインを使用するには、ドメイン登録が必要であることを指定するポリシーを作成します。 ドメインサーバーのURLをに指定し、匿名認証 `https:// host:port/flashaccess/domainserver/domainname/` を指定します。

参照の実装では、ドメイン登録の次のロジックが実装されます。

1. 要求URLからドメイン名を解析します。
1. テーブル内のドメイン名を参照し `DomainServerInfo` ます。 エントリが見つからない場合は、テーブルにエントリを挿入します(デフォルト値：認証は必須ではなく、メンバーシップの上限はありません)。
1. 要求されたドメインに認証が必要な場合は、有効な認証トークンが要求に含まれていることを確認し、データベースで指定されている場合はAuth名前空間と一致していることを確認します。

   1. 認証が必要で、有効な認証トークンが指定されていない場合は、エラーを返し `DOM_AUTHENTICATION_REQUIRED (503)`ます。

1. デバイスが既にドメインに登録されているかどうかを確認します。

   1. テーブル内のドメイン名を参照し `DomainMembership` ます。 見つかった各マシンのGUIDについて、要求内のマシンのGUIDと比較します。 これが新しいマシンの場合は、エントリを `DomainMembership` 表に追加します。

   1. 新しいデバイスで、Max Membershipに既に到達している場合は、エラーを返し `DOM_LIMIT_REACHED (502)`ます。

1. テーブル内のこのドメインのすべてのドメインキーを参照し `DomainKeys` ます。

   1. がキーをロールオーバーする必要があ `DomainServerInfo` ることを示している場合は、新しいキーペアを生成し、 `DomainKeys` テーブルに保存して（キーバージョン1が既存の最も高いキーよりも高い）、で `Key Rollover Required` フラグをリセットし `DomainServerInfo`ます。

   1. 各ドメインキーに対して、ドメイン秘密鍵証明書を生成します。

このリファレンスの実装では、ドメインの登録解除のために次のロジックが実装されています。

1. 要求URLからドメイン名を解析します。
1. テーブル内の要求されたドメイン名を参照し `DomainServerInfo` ます。
1. 要求されたドメインに認証が必要な場合は、有効な認証トークンが要求に含まれていることを確認し、データベースで指定されている場合はAuth名前空間と一致していることを確認します。
1. テーブル内のドメイン名とマシンGUIDを参照し `DomainMembership` ます。 一致するエントリが見つからない場合は、エラーを返し `DEREG_DENIED (401)`ます。

1. これがプレビューリクエストでない場合は、からエントリを削除し、に `DomainMembership` フラグを設定し `Key Rollover Required``DomainServerInfo`ます。

この場合、多数のマシンがドメインに参加する可能性があるので、マシンIDを完全に一致させることはできません。 代わりに、個別化の際にマシンに割り当てられたランダムなマシンGUIDが使用されます。
