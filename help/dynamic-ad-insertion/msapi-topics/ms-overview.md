---
description: マニフェストサーバーは、コンテンツの提供、広告の提供、ビデオの再生、広告の追跡を行うシステムを調整します。 M3U8でエンコードされた再生リスト（マニフェスト）を受け取り、クライアントビデオプレーヤーがコンテンツプロバイダーから受け取った再生リスト（マニフェスト）を広告プロバイダーからマニフェストに繋ぎ合わせ、繋ぎ合わせされたマニフェストをビデオプレーヤーに渡します。 クライアント側とサーバー側の両方の広告トラッキングをサポートします。 HTTPベースのWebサービスインターフェイスを使用してインタラクションを実行します。
seo-description: マニフェストサーバーは、コンテンツの提供、広告の提供、ビデオの再生、広告の追跡を行うシステムを調整します。 M3U8でエンコードされた再生リスト（マニフェスト）を受け取り、クライアントビデオプレーヤーがコンテンツプロバイダーから受け取った再生リスト（マニフェスト）を広告プロバイダーからマニフェストに繋ぎ合わせ、繋ぎ合わせされたマニフェストをビデオプレーヤーに渡します。 クライアント側とサーバー側の両方の広告トラッキングをサポートします。 HTTPベースのWebサービスインターフェイスを使用してインタラクションを実行します。
seo-title: マニフェストサーバーの操作の概要
title: マニフェストサーバーの操作の概要
uuid: 3e314a45-a4dd-492f-8915-19224a8fbbc7
translation-type: tm+mt
source-git-commit: 9dc8498593a1d70918b66016e429eb013cdc61f7

---


# マニフェストサーバーの操作の概要 {#overview-of-manifest-server-interactions}

マニフェストサーバーは、コンテンツの提供、広告の提供、ビデオの再生、広告の追跡を行うシステムを調整します。 M3U8でエンコードされた再生リスト（マニフェスト）を受け取り、クライアントビデオプレーヤーがコンテンツプロバイダーから受け取った再生リスト（マニフェスト）を広告プロバイダーからマニフェストに繋ぎ合わせ、繋ぎ合わせされたマニフェストをビデオプレーヤーに渡します。 クライアント側とサーバー側の両方の広告トラッキングをサポートします。 HTTPベースのWebサービスインターフェイスを使用してインタラクションを実行します。

一般的な設定には、次のものが含まれます。

* Primetimeマニフェストサーバー
* Primetime Creative Repackaging Service(CRS)
* クライアント、ビデオプレーヤーの制御
* 発行者(通常、コンテンツ管理システム(CMS)を使用)
* コンテンツ配信ネットワーク(CDN)
* 広告サーバー
* 広告トラッキングレポートの受信者

ワークフローは、CDNがAkamaiの場合や、クライアントが広告追跡を実行している場合など、様々な要因に基づいて異なります。 クライアント側の広告追跡のワークフローの図については、「クライアント側の追跡 [ワークフロー」を参照してくださ](../msapi-topics/ms-at-effectiveness/notvsdk-csat-overview.md#section_cst_flow)い。

マニフェストサーバーは、HTTP GET要求を受信し、応答することで、ビデオ配信クライアントとやり取りします。 応答は、広告の関連付けされたコンテンツを記述するM3U8エンコードされたマニフェストです。オプションで、詳細な広告追跡命令を含むJSONまたはVMAP構造（サイドカー）を含めます(ファイル形式を [参照](../msapi-topics/ms-list-file-formats/ms-api-file-formats.md))。

一般的なワークフローは次のようになります。

1. 発行者は、広告サーバーのコンテンツURLと情報をクライアントに送信します。
1. クライアントは、パブリッシャーからの情報を使用してマニフェストサーバーURLを生成し、そのURLにGET要求を送信します。 これは、ブートストラップURLと呼ばれます。
1. マニフェストサーバーは、クライアントとのセッションを確立します。
1. マニフェストサーバーは、CDNからコンテンツマニフェストを取得します。このCDNには広告の時間の情報が含まれる場合があります。
1. マニフェストサーバーは、クライアント用に生成されたマスター/バリアントマニフェストにクライアントをリダイレクトします。

   >[!NOTE]
   >
   >Bootstrap URLクエリパラメーターにまたは設定が含まれ `pttrackingmode=simple``ptplayer=ios-mobileweb` る場合、マニフェストサーバーはJSONオブジェクトでマスター/バリアントマニフェストURLを返し、クライアントはそのバリアントマニフェストURLにGET要求を送信します。

1. クライアントは、生成されたバリアントマニフェスト内のストリームを選択して再生し、広告情報をマニフェストサーバーに送信します。
1. マニフェストサーバーは、クライアントから提供された情報を広告サーバーに渡し、広告サーバーから広告と広告追跡URLを受信します。 指定した広告がHLS形式でない場合、マニフェストサーバーはHLSに変換するためにCRSに送信します。
1. マニフェストサーバーは広告をコンテンツマニフェストにステッチし、新しいステッチされたマニフェストをクライアントに送信します。
1. クライアントは、広告が関連付けられたコンテンツを再生し、指定された時間に指定された追跡URLに対してリクエストを行います。

Primetimeの広告挿入は、多くのビデオ配信プラットフォーム上のクライアントをサポートします。 すべてのクライアントがPrimetime TVSDKパッケージを基に構築されるわけではありませんが、すべてのクライアントが同じ基本URLにGETリクエストを送信します。 クエリパラメーターは、マニフェストサーバーに次のように伝えることで、1つのクライアントリクエストを別のクライアントリクエストと区別します。

* どの顧客がリクエストを行っているか
* 依頼人が何を望んでいるか
* および提供する広告追跡情報。

## CORS {#section_BEA7F298660944BE92801E4C82FCD038}

マニフェストサーバーは、クロスオリジンリソース共有標準(CORS)を使用します。 受け取る要求のヘ `Origin` ッダーを探します。 ヘッダーが存在する場合、

* `Access-Control-Allow-Origin: *`Originヘッダーの文字列`*`
* `Access-Control-Allow-Credentials: true`
* `Access-Control-Allow-Methods: GET`

そうでない場合、次のように返されます。

* `Access-Control-Allow-Origin: *`
* `Access-Control-Allow-Methods: GET`