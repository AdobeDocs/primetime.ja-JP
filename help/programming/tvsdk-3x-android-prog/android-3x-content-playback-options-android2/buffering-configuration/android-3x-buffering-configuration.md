---
description: よりスムーズな表示エクスペリエンスを提供するために、TVSDKはビデオストリームをバッファリングすることがあります。 プレイヤーのバッファリング方法を設定できます。
seo-description: よりスムーズな表示エクスペリエンスを提供するために、TVSDKはビデオストリームをバッファリングすることがあります。 プレイヤーのバッファリング方法を設定できます。
seo-title: バッファ
title: バッファ
uuid: c84b98ed-0070-4a86-a409-d7702e5be23c
translation-type: tm+mt
source-git-commit: bc35da8b258056809ceaf18e33bed631047bc81b

---


# 概要 {#buffering-overview}

よりスムーズな表示エクスペリエンスを提供するために、TVSDKはビデオストリームをバッファリングすることがあります。 プレイヤーのバッファリング方法を設定できます。

TVSDKは、30秒以上の再生バッファー長と、メディアの再生開始前の初期バッファー時間（2秒以上）を定義します。 アプリケーションが呼び出 `play`された後、再生が開始される前に、TVSDKはメディアを初期時間までバッファリングし、実際に再生が開始されたときにスムーズな開始を提供します。

新しいバッファリングポリシーを定義することでバッファー時間を変更できます。また、インスタントオンを使用して、最初のバッファリングが発生するタイミングを変更できます。

## 時間ポリシーのバッファリング {#section_9B3407D52F1E4CB48E7A4836EBDA8F70}

環境（デバイス、オペレーティングシステム、ネットワークの状態など）に応じて、初期バッファリングの最小時間の変更や継続的な再生バッファリングなど、プレーヤーに対して様々なバッファリングポリシーを設定できます。

呼び出し後、メディアプ `play`レイヤーはビデオのバッファリングを開始します。 メディアプレイヤーが、最初のバッファー時間で指定されたビデオの量をバッファリングすると、再生が開始されます。 この処理により、再生が開始される前に再生バッファー全体が満杯になるのを待たずに、再生の開始時間が短縮されます。 代わりに、最初の数秒がバッファリングされた後、再生が開始されます。

ビデオのレンダリング中、TVSDKは、再生バッファー時間で指定された量がバッファーされるまで、新しいフラグメントのバッファーを続行します。 現在のバッファー長が再生バッファー時間を下回ると、プレーヤーは追加のフラグメントをダウンロードします。 現在のバッファー長が再生バッファー時間を数秒上回ると、TVSDKはフラグメントのダウンロードを停止します。

>[!TIP]
>
>初期バッファー値が高い場合、開始前に長い初期バッファー時間が発生する可能性があります。 これにより、より長い時間の再生がスムーズになる場合があります。ただし、ネットワークの状態が悪い場合は、最初の再生が遅延する可能性があります。

を呼び出して即時オンを有効にした場合、 `prepareBuffer`最初のバッファリングは、待機する代わりに、その時点から開始されま `play`す。

## バッファリング時間の設定 {#section_05CDD927869D47EBA1D2069B1416B2E4}

は、初期 `MediaPlayer` バッファリング時間と再生バッファリング時間を設定および取得するメソッドを提供します。

>[!TIP]
>
>再生を開始する前にバッファー制御パラメーターを設定しなかった場合、メディアプレイヤーは、初期バッファーが2秒、再生中のバッファー時間が30秒にデフォルト設定されます。

1. オブジェクトを設定し `BufferControlParameters` ます。このオブジェクトには、初期バッファー時間と再生バッファー時間の制御パラメーターがカプセル化されています。

   このクラスは、次のファクトリメソッドを提供します。

   * 初期バッファー時間を再生バッファー時間と同じに設定するには：

      ```
      public static BufferControlParameters createSimple(long bufferTime)
      ```

   * 初期バッファー時間と再生バッファー時間を設定するには：

      ```
      public static BufferControlParameters createDual( 
        long initialBuffer,  
        long bufferTime)
      ```
   パラメーターが無効な場合、次の条件が満たされ `MediaPlayerException` た場合など、 `PSDKErrorCode.INVALID_ARGUMENT`これらのメソッドはエラーコードと共にスローされます。

   * 初期バッファー時間が0未満です。
   * 初期バッファー時間がバッファー時間より長くなっています。


1. バッファパラメータの値を設定するには、次の方法を使用 `MediaPlayer` します。

   ```java
   void setBufferControlParameters(BufferControlParameters params)
   ```

1. 現在のバッファーパラメーター値を取得するには、次のメソッドを使用 `MediaPlayer` します。

   ```java
      BufferControlParameters getBufferControlParameters()  
   ```

<!--<a id="example_DE0580B3AD404635825D3301C1F096B6"></a>-->

例えば、初期バッファーを5秒に設定し、再生バッファー時間を30秒に設定するには、次のように記述します。

```java
mediaPlayer.setBufferControlParameters(BufferControlParameters.createDual(5000, 30000));
```
