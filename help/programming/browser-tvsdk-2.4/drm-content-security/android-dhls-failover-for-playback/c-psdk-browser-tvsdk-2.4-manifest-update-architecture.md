---
description: ブラウザーTVSDKが更新されたマスターマニフェストをどのように受け入れるかに関する情報と例を以下に示します。
seo-description: ブラウザーTVSDKが更新されたマスターマニフェストをどのように受け入れるかに関する情報と例を以下に示します。
seo-title: ライブマスターマニフェストの更新アーキテクチャ
title: ライブマスターマニフェストの更新アーキテクチャ
uuid: 6f253502-8dec-4b42-9ee1-99ad9bfd6080
translation-type: tm+mt
source-git-commit: 040655d8ba5f91c98ed0584c08db226ffe1e0f4e

---


# ライブマスターマニフェストの更新アーキテクチャ{#live-master-manifest-update-architecture}

ブラウザーTVSDKが更新されたマスターマニフェストをどのように受け入れるかに関する情報と例を以下に示します。

デフォルトでは、この機能はオフになっています。 更新頻度を分単位で設定してオンにした場合、更新間隔ごとに次の手順が実行されます。

1. ブラウザーTVSDKは、マスターマニフェストの最終変更時刻とetagをチェックし、ファイルが更新されたかどうかを判断します。

   時刻とetagの両方が変更された場合、ファイルは変更済みと見なされます。
1. ブラウザーTVSDKは、新しいマニフェストを解析および分析し、更新の性質に基づいて適切なアクションを実行します。
1. 現在の再生ビットレートが変更されたマニフェストのビットレートと一致する場合、ブラウザーTVSDKは新しいプロファイルに切り替えます。

   新しいプロファイルは、別のサーバーまたは同じサーバーの同じビットレートで作成できます。 この場合、移行はスムーズです。
1. 現在の再生ビットレートが新しいマニフェストに存在しない場合、ブラウザーTVSDKは、新しいマニフェストにも存在する現在のプロファイル内のビットレートを検索しようとします。

   * 一致が見つかった場合、プレイヤーは、最初に既存のマニフェスト内の一致ビットレートプロファイルに切り替え、次に、更新されたマニフェスト内の一致ビットレートプロファイルに切り替えます。 これにより、移行がスムーズになります。
   * 以前のマニフェストと新しいマニフェストとの間にビットレートが共通でない場合、またはブラウザーTVSDKが一致するビットレートに切り替えられない場合、ブラウザーTVSDKは新しいマニフェストの最も低いビットレートプロファイルに直接切り替え、ABRを使用して帯域幅に基づいて許可されるビットレートに切り替えます。 これにより、再生に若干の問題が発生する可能性がありますが、影響は最小限に抑えてください。

1. 更新が成功すると、ブラウザーTVSDKはイベントをディスパッチ `MediaPlayerItemEvent.MASTER_UPDATED` します。
1. 更新が成功しなかった場合は、この更新の前からセットアップが再生を続行します。

## 例1 {#example_DB55F2B9D98741628C9B973E47A0B6A0}

以下のビットレートはライブ放送中です。

* 500k
* 900k
* 2100k

2100kのストリームに問題があるので、再起動する必要があります。 マスターマニフェストが更新され、500kと900kのみが含まれるようになりました。 その後、2100kでこの番組を視聴しているユーザーは、ビットレートが900kに切り替わります。 900kで視聴しているユーザは、引き続き900kで視聴します。 その後、2100kのストリームが再開され、マスターマニフェストに再度追加されます。 しばらくしてから、900kで視聴し、帯域幅を持つユーザーは2100kに切り替えられます。

### 例2 {#example_485E9A9F373D454CADE5395DEC734E5D}

以下のビットレートはライブ放送中です。

* 500k
* 900k
* 2100k

これらのビットレートはすべて再起動する必要があります。 これに対して設定されている一時ストリームは、400kと1500kの2つです。 ユーザーは、新しい設定で最も低いビットレートである400kに切り替えられます。 十分な帯域幅がある場合、一部のユーザーは1500kに切り替わります。 その後、3つのビットレートがバックアップされ、マスターマニフェストが更新されます。 変更後の（元の）マニフェストで最も低い帯域幅である500kでの視聴に自動的に切り替わります。 しばらくしてから、ユーザーはネットワークで許容される最大の帯域幅（900kまたは1200k）に切り替わります。

<!-- 

WRITER: Add relref to api/psdk/asdoc-dhls_1.4/com/adobe/mediacore/events/MediaPlayerItemEvent.html#MASTER_UPDATED

 -->

