---
description: ユーザーがメディアを早送りまたは巻き戻しすると、トリック再生モードになります。 トリック再生モードに入るには、MediaPlayerの再生速度を1以外の値に設定する必要があります。
seo-description: ユーザーがメディアを早送りまたは巻き戻しすると、トリック再生モードになります。 トリック再生モードに入るには、MediaPlayerの再生速度を1以外の値に設定する必要があります。
seo-title: 早送りと巻き戻しの実装
title: 早送りと巻き戻しの実装
uuid: bd190534-c871-4673-b79d-1413277f480f
translation-type: tm+mt
source-git-commit: 5a786d8001326f874a51d65b8e8badca44f46e96

---


# 早送りと巻き戻しの実装 {#implement-fast-forward-and-rewind}

ユーザーがメディアを早送りまたは巻き戻しすると、トリック再生モードになります。 トリック再生モードに入るには、MediaPlayerの再生速度を1以外の値に設定する必要があります。

速度を切り替えるには、1つの値を設定する必要があります。

1. 通常再生モード(1x)からトリック再生モードに移動するには、のプロパティを `rate` 許可された値に `MediaPlayer` 設定します。

   * クラス `MediaPlayerItem` は、許可される再生速度を定義します。
   * TVSDKは、指定されたレートが許可されない場合に、最も近い許容レートを選択します。

      トリック再生率を0（一時停止）または1（通常再生）から1以上 —1未満のレートに変更すると、タイムライン上のすべての広告が削除されます。 タイムライン全体には、広告の位置で停止することなく、コンテンツの早送りと巻き戻しを可能にする、トリック再生アクションを容易にする1つの期間しかありません。 このアクションは、TVSDKのタイムラインの切り離しアクションによって、解決されたすべてのadBreaksを削除することによって有効になります。 トリック再生が0または1で再開されると、最初にadBreaksがタイムラインの添付アクションによって復元されます。

      次の情報を記憶しておきます。

   * トリック再生アクションがコンテンツを巻き戻す場合、レートが1に変更されると再生が再開されます。
   * トリック再生アクションがコンテンツを早送りする場合、最後にスキップされたadBreakが再開位置で再生されます。
   次の例では、プレーヤーの内部再生速度を要求された速度に設定します。

   ```
   private function onPlaybackRateChange(event:IndexChangeEvent):void { 
       var newRateIndex:int = event.newIndex; 
       var newRate:Number = _playbackRates[newRateIndex]; 
   
       _player.rate = newRate; 
   } 
   ```

1. オプションで、レート変更イベントをリッスンできます。このイベントによって、レート変更をリクエストしたときや、レート変更が実際に発生したときに通知されます。

   TVSDKは、トリック再生に関連する次のイベントをディスパッチします。

   * `mediacore.events.PlaybackRateEvent.RATE_SELECTED` 値が別の `rate` 値に変更された場合。

   * `mediacore.events.PlaybackRateEvent.RATE_PLAYING` 選択した速度で再生が再開されたとき。
   TVSDKは、プレーヤーがトリック再生モードから通常再生モードに戻ると、これらの両方のイベントをディスパッチします。

## レート変更API要素 {#rate-change-api}

TVSDKには、有効なレート、現在のレート、トリック再生がサポートされているかどうか、および早送りと巻き戻しに関連するその他の機能を判断するためのメソッド、プロパティ、イベントが含まれています。

次のAPIエレメントを使用して、再生率を変更します。

* `MediaPlayer.rate` setter関数とgetter関数のプロパティ
* `MediaPlayer.localTime property` getter機能を持つ
* `mediacore.events.PlaybackRateEvent.RATE_SELECTED`
* `mediacore.events.PlaybackRateEvent.RATE_PLAYING`
* `MediaPlayerItem.IsTrickPlaySupported` getter関数のプロパティ
* `AdBreakPlaybackEvent.AD_BREAK_SKIPPED`
* `MediaPlayerItem.availablePlaybackRates` getter関数のプロパティ — 有効なレートを指定します。

| レート値 | 再生への影響 |
|---|---|
| 2.0, 4.0, 8.0, 16.0, 32.0, 64.0  , 128.0 | 指定した乗数が通常よりも速い早送りモードに切り替えます（例えば、4は通常よりも4倍速い）。 |
| -2.0, -4.0, -8.0, -16.0, -32.0, -64.0  , -128.0 | 早戻しモードに切り替えます。 |
| 1.0 | 通常再生モードに切り替えます( `play` 呼び出しは、rateプロパティを1.0に設定するのと同じです)。 |
| 0.0 | 一時停止(呼び出 `pause` しは、rateプロパティを0.0に設定するのと同じ) |

## トリック再生の制限と動作 {#limitations-behavior-trick-play}

トリック再生モードの制限を次に示します。

* マスタープレイリストには、I-frame-onlyセグメントが含まれている必要があります。 I-frameトラックのキーフレームのみが画面に表示されます。
* オーディオトラックとクローズドキャプションは無効です。
* 可変ビットレート(ABR)ロジックは無効です。 TVSDKは、提供されている最も低いレートから800 kbpsの間のビットレートを1つ選択し、トリック再生セッション全体でそのレートを使用します。
* 再生と一時停止が有効になっています。
* シークは許可されていません。 シークするには、トリッ `pause` ク再生モードを終了し、を呼び出しま `seek`す。

* トリック再生モードを任意の許容再生速度（再生または一時停止）に終了できます。
* 広告をストリームに組み込む場合：

   * メインコンテンツの再生中にのみ、トリック再生に移動できます。 広告の時間中にトリック再生に切り替えようとすると、エラーが発生します。
   * トリック再生モードを開始した後、広告の時間は無視され、広告イベントは発生しません。
   * TVSDKがプレイヤーアプリケーションに公開するタイムラインは、広告の時間がスキップされた場合でも変更されません。
   * プロパ `MediaPlayer.currentTime` ティは、スキップされた広告の時間の長さに合わせて、前方（早送りの場合）または後方（巻き戻しの場合）にジャンプします。 現在時間のこのジャンプ動作により、トリック再生中にストリームの長さを変更しないでおくことができます。 プレイヤーアプリケーションは、このプロ `localTime` パティを使用して、メインコンテンツに対する相対的な時間のみを追跡できます。 広告をスキップする際に、ローカル時間に対して返される値に対して時間のジャンプは実行されません。

   * このイ `AdBreakPlaybackEvent.AD_BREAK_SKIPPED` ベントは、広告の時間がスキップされる直前に発行されます。 プレイヤーは、このイベントを使用して、スキップされた広告の時間に関連するカスタムロジックを実装できます。
   * トリック再生を終了すると、シークを終了したときと同じ広告再生ポリシーが呼び出されます。

      したがって、シークの場合と同様に、動作は、アプリケーションの再生ポリシーがデフォルトと異なるかどうかによって異なります。 デフォルトでは、最後にスキップされた広告の時間は、トリック再生から出た時点で再生されます。