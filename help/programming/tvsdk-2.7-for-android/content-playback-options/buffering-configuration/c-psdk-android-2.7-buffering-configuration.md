---
description: よりスムーズな表示を実現するために、 TVSDK はビデオストリームをバッファリングする場合があります。 プレーヤーのバッファリング方法を設定できます。
title: バッファリング
source-git-commit: 02ebc3548a254b2a6554f1ab34afbb3ea5f09bb8
workflow-type: tm+mt
source-wordcount: '500'
ht-degree: 0%

---

# 概要 {#buffering-overview}

よりスムーズな表示を実現するために、 TVSDK はビデオストリームをバッファリングする場合があります。 プレーヤーのバッファリング方法を設定できます。

TVSDK は、30 秒以上の再生バッファーの長さと、メディアの再生が開始される前の初期バッファー時間（2 秒以上）を定義します。 アプリケーションの呼び出し後 `play`ただし、再生が開始される前に、 TVSDK はメディアを初期時間までバッファリングして、実際に再生が開始されたときにスムーズに開始できるようにします。

新しいバッファリングポリシーを定義することでバッファー時間を変更できます。また、インスタントオンを使用して、最初のバッファリングが発生するタイミングを変更できます。

## バッファリング時間ポリシー {#section_9B3407D52F1E4CB48E7A4836EBDA8F70}

環境（デバイス、オペレーティングシステム、ネットワーク条件など）に応じて、プレーヤーに対して様々なバッファリングポリシーを設定できます。例えば、最初のバッファリングの最小時間の変更や、進行中の再生バッファリングなどです。

通話後 `play`に設定されている場合、メディアプレーヤーはビデオのバッファリングを開始します。 メディアプレーヤーが最初のバッファー時間で指定されたビデオ量をバッファーした場合、再生が開始されます。 このプロセスでは、再生を開始する前に、再生バッファ全体が満杯になるのを待たないので、起動時間が短縮されます。 代わりに、最初の数秒がバッファーされた後、再生が開始されます。

ビデオのレンダリング中、 TVSDK は、再生バッファ時間で指定された量のバッファーが完了するまで、新しいフラグメントのバッファーを継続します。 現在のバッファーの長さが再生バッファー時間を下回った場合、プレーヤーは追加のフラグメントをダウンロードします。 現在のバッファーの長さが再生バッファー時間を数秒上回ると、 TVSDK はフラグメントのダウンロードを停止します。

>[!TIP]
>
>初期バッファ値が大きい場合は、開始前にユーザーに長い初期バッファリング時間が与えられる可能性があります。 その結果、長時間スムーズな再生が可能になる場合があります。ただし、ネットワークの状態が低い場合は、最初の再生に遅延が生じる可能性があります。

を呼び出すことですぐにオンにできる場合は、 `prepareBuffer`の場合、最初のバッファリングは、 `play`.

## バッファリング時間の設定 {#section_05CDD927869D47EBA1D2069B1416B2E4}

The `MediaPlayer` には、初期バッファリング時間と再生バッファリング時間を設定および取得するメソッドが用意されています。

>[!TIP]
>
>再生を開始する前にバッファー制御パラメーターを設定しない場合、メディアプレーヤーでは、初期バッファーが 2 秒、進行中の再生バッファー時間が 30 秒にデフォルト設定されます。

1. を設定します。 `BufferControlParameters` オブジェクト。初期バッファ時間と再生バッファ時間の制御パラメーターをカプセル化します。

   このクラスは、次のファクトリメソッドを提供します。

   * 初期バッファ時間を再生バッファ時間と等しく設定するには：

     ```
     public static BufferControlParameters createSimple(long bufferTime)
     ```

   * 初期バッファー時間と再生バッファー時間を設定するには：

     ```
     public static BufferControlParameters createDual( 
       long initialBuffer,  
       long bufferTime)
     ```

   パラメーターが無効な場合、これらのメソッドは次の処理をスローします。 `MediaPlayerException` をエラーコードと共に使用 `PSDKErrorCode.INVALID_ARGUMENT`（次の条件を満たす場合など）。

   * 初期バッファ時間が 0 未満です。
   * 初期バッファ時間がバッファ時間より長い。

1. バッファパラメータの値を設定するには、次を使用します。 `MediaPlayer` メソッド：

   ```java
   void setBufferControlParameters(BufferControlParameters params)
   ```

1. 現在のバッファパラメータの値を取得するには、次を使用します。 `MediaPlayer` メソッド：

   ```java
      BufferControlParameters getBufferControlParameters()  
   ```

<!--<a id="example_DE0580B3AD404635825D3301C1F096B6"></a>-->

例えば、最初のバッファーを 5 秒に、再生バッファー時間を 30 秒に設定するには、次のように記述します。

```java
mediaPlayer.setBufferControlParameters(BufferControlParameters.createDual(5000, 30000));
```
