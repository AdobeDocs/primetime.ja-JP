---
title: メディアファイルのパッケージ化の概要
description: メディアファイルのパッケージ化の概要
copied-description: true
source-git-commit: 02ebc3548a254b2a6554f1ab34afbb3ea5f09bb8
workflow-type: tm+mt
source-wordcount: '663'
ht-degree: 0%

---

# 概要 {#packaging-media-files-overview}

パッケージ化とは、DRM ポリシーを暗号化し、ビデオコンテンツに適用するプロセスを指します。 メディアパッケージ化 API を使用してファイルをパッケージ化できます。 Primetime DRM Java SDK でパッケージ化できるのは、MP4 などのプログレッシブダウンロードコンテンツのみです。

>[!NOTE]
>
>お使いのメディア形式や使用例に最も適したパッケージオプションを選択する方法については、Primetime DRM 担当者にお問い合わせください。

パッケージは、ライセンスサーバから分離されます。 パッケージャがライセンスサーバーに接続して、コンテンツに関する情報を交換する必要はありません。 ライセンスの発行に必要なライセンスサーバーの情報はすべて、コンテンツのメタデータに含まれます。

ファイルを暗号化すると、その内容は適切なライセンスがなければ解析できません。 Primetime DRM を使用して、暗号化するファイル部分を選択できます。 Primetime DRM はビデオコンテンツのファイル形式を解析できるので、ファイル全体ではなく、ファイルの一部をインテリジェントに暗号化できます。 メタデータやキューポイントなどのデータは、暗号化されずに残るので、検索エンジンはファイルを検索できます。

1 つのコンテンツに複数の DRM ポリシーが含まれている場合があります。 例えば、コンテンツを複数回パッケージ化する必要なく、様々なビジネスモデルでコンテンツのライセンスを取得できます。 さらに、匿名アクセスを短期間許可し、顧客がコンテンツを購入して無制限にアクセスできるようにすることができます。 複数の DRM ポリシーを使用してコンテンツをパッケージ化する場合、ライセンスサーバーは、ライセンスの発行に使用する DRM ポリシーを選択するロジックを実装する必要があります。

>[!NOTE]
>
>アーキテクチャを使用すると、コンテンツをパッケージ化する際に、使用 DRM ポリシーを指定し、コンテンツに結び付けることができます。 クライアントがコンテンツを再生する前に、クライアントは指定したコンピュータのライセンスを取得する必要があります。 ライセンスは、適用される使用ルールを指定し、コンテンツの復号化に使用する必要があるキーを提供します。 DRM ポリシーは、ライセンスを生成するためのテンプレートを表します。 ただし、ライセンスサーバがライセンスを発行する際に、使用規則を上書きする場合があります。 有効期限や再生ウィンドウなどの制約によって、ライセンスが無効にレンダリングされる場合があります。

Primetime DRM は、CEK を渡す API を提供します。 CEK が指定されていない場合、SDK は CEK をランダムに生成します。 通常は、コンテンツのセクションごとに異なる CEK が必要です。 ただし、Dynamic Streaming では、そのコンテンツを構成するすべてのファイルに同じ CEK を使用することがよくあります。 したがって、あるビットレートから別のビットレートにシームレスに移行するには、1 つのライセンスのみが必要です。 複数のコンテンツに同じキーとライセンスを使用する場合は、同じキーとライセンスを渡す必要があります `DRMParameters` ～に対して `MediaEncrypter.encryptContent()`を使用するか、 `V2KeyParameters.setContentEncryptionKey()`. コンテンツのセクションごとに異なるキーとライセンスを使用する場合は、新しい `DRMParameters` 各ファイルのインスタンス。

キーローテーションを使用してコンテンツをパッケージ化する場合、使用するローテーションキーとキーの変更頻度を制御できます。 `F4VDRMParameters` および `FLVDRMParameters` を実装します。 `KeyRotationParameters` インターフェイス。 このインタフェースを使用して、キーの回転を有効にすることができます。 また、 `RotatingContentEncryptionKeyProvider`. 暗号化された各サンプルに対して、このクラスは使用する回転キーを決定します。 独自のプロバイダーを実装するか、 `TimeBasedKeyProvider` を SDK に含めます。 この実装では、指定された秒数の後に新しいキーがランダムに生成されます。

場合によっては、コンテンツのメタデータを別のファイルとして保存し、コンテンツとは別のクライアントで使用できるようにする必要があります。 その場合は、を呼び出す必要があります。 `MediaEncrypter.encryptContent()`を返します。 `MediaEncrypterResult` オブジェクト。 通話 `MediaEncrypterResult.getKeyInfo()` そして結果を以下の場所に投げ込みます。 `V2KeyStatus`. 次に、コンテンツメタデータを取得し、ファイルに保存します。

これらのタスクはすべて、Java API を使用して実行できます。

詳しくは、 *Adobe Primetime DRM API リファレンス* を参照してください。

詳しくは、 *Adobe Primetime DRM 参照実装の使用* を参照してください。
