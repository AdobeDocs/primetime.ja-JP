---
description: TVSDK は、ライブビデオストリームのブラックアウトを処理し、ブラックアウト中に代替コンテンツを提供します。
title: ライブストリーム内のブラックアウトの処理
source-git-commit: 02ebc3548a254b2a6554f1ab34afbb3ea5f09bb8
workflow-type: tm+mt
source-wordcount: '337'
ht-degree: 0%

---

# ライブストリーム内のブラックアウトの処理{#handle-blackouts-in-live-streams}

TVSDK は、ライブビデオストリームのブラックアウトを処理し、ブラックアウト中に代替コンテンツを提供します。

プログラミングブラックアウトに関連する最も一般的な使用例は、プレーヤーアプリが、メインストリームを視聴する資格のないユーザーに代替コンテンツを提供する場合です。 このアプリでは、 TVSDK を使用してブラックアウト期間の開始と終了を判断できます。 これにより、ブラックアウト期間の開始時に、再生時にメインストリームから代替ストリームに切り替え、ブラックアウト期間が終了したらメインストリームに切り替えることができます。

この使用例に対してソリューションを実装するには、次の手順を実行します。

1. ライブストリームマニフェスト内のブラックアウトタグをサブスクライブするようにアプリを設定します。

   TVSDK は、ブラックアウトタグを直接認識しませんが、マニフェストファイルの解析中に特定のタグが検出された場合に、アプリが通知をサブスクライブできます。
1. 次の通知リスナーを追加します。 `PTTimedMetadataChangedNotification`.

   この通知は、サブスクライブされたタグがマニフェストで解析されるたびに、新しい `PTTimedMetadata` それから準備されている

1. 次のようなリスナーメソッドを実装します。 `onMediaPlayerSubscribedTagIdentified`の場合は `PTTimedMetadata` オブジェクトを前景に配置します。

1. 再生中に更新が発生するたびに、 `PTMediaPlayerTimeChangeNotification` ～を扱う聞き手 `PTTimedMetadata` オブジェクト。

1. 次を追加： `PTTimedMetadata` ハンドラー

   このハンドラーを使用すると、代替コンテンツに切り替え、 `PTTimedMetadata` オブジェクトとその再生時間。

1. 用途 `onSubscribedTagInBackground` リスナーメソッドを実装するには、次の手順に従います。 `PTTimedMetadata` オブジェクトをバックグラウンドで表示します。

   この方法は、バックグラウンドストリーム上のタイミングを監視します。これは、代替コンテンツからメインコンテンツに切り替えるタイミングを判断するのに役立ちます。

1. バックグラウンドエラーのリスナーメソッドを実装します。
1. ブラックアウト範囲が再生ストリーム上の DVR に含まれる場合は、シーク不能範囲を更新します。

   次の場合、アプリケーションは、DVR でシーク不能な範囲を設定する必要があります。

   * DVR でブラックアウトが発生している場合に、メインストリームに参加する場合。
   * 代替コンテンツからメインコンテンツに切り替える場合。
