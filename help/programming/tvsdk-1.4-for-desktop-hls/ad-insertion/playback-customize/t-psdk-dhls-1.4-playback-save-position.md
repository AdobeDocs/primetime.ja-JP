---
description: 現在の再生位置をビデオ内に保存し、以降のセッションで同じ位置での再生を再開できます。
seo-description: 現在の再生位置をビデオ内に保存し、以降のセッションで同じ位置での再生を再開できます。
seo-title: ビデオの位置を保存し、後で再開します
title: ビデオの位置を保存し、後で再開します
uuid: 03ed5c63-008d-4dd1-9a31-baefa73b56e2
translation-type: tm+mt
source-git-commit: 040655d8ba5f91c98ed0584c08db226ffe1e0f4e
workflow-type: tm+mt
source-wordcount: '426'
ht-degree: 0%

---


# ビデオの位置を保存して後で再開{#save-the-video-position-and-resume-later}

現在の再生位置をビデオ内に保存し、以降のセッションで同じ位置での再生を再開できます。

動的に挿入される広告は、ユーザーセッション間で異なるので、**を**&#x200B;スライスされた広告と共に保存した場合、以降のセッションでは別の位置が参照されます。 TVSDKは、スライスされた広告を無視して、再生位置を取得するメソッドを提供します。

1. ユーザーがビデオを終了すると、アプリケーションはビデオ内の位置を取得して保存します。

   >[!TIP]
   >
   >広告の時間は含まれません。

   広告の時間は、広告パターン、フリークエンシーキャップなどのため、セッションごとに異なる場合があります。 あるセッションでのビデオの現在時間は、将来のセッションでは異なる場合があります。 ビデオ内の位置を保存すると、アプリケーションはローカル時間を取得します。 `localTime`プロパティを使用してこの位置を読み取り、デバイス上またはサーバー上のデータベースに保存できます。

   ```
   var resumeTime:Number = player.localTime; 
   // save the resumeTime to a persistent location
   ```

   例えば、ユーザーがビデオの20分で、この位置に5分の広告が含まれる場合、`currentTime`は`be` 1200秒、`localTime`は`be` 900秒になります。

1. プレイヤーのアクティビティが再開されたら、ユーザーセッションを復元します。

   TVSDKは、情報をローカルに保存しないので、TVSDKの初期化間の再生を再開しません。 アプリケーションでこのロジックを実装する必要があります。

   ```
   // retrieve the resumeTime from the persistent location 
   var resumeTime:Number:Number = ...;
   ```

1. ビデオを同じ位置で再開するには：

   * 前のセッションで保存した位置からビデオの再生を再開するには、`seekToLocal`を使用します。

      >[!TIP]
      >
      >このメソッドは、ローカル時間値でのみ呼び出されます。 現在の時間でメソッドを呼び出すと、誤った動作が発生します。

   * 現在時間をシークするには、`seek`を使用します。

1. アプリケーションが`onStatusChanged`ステータス変更イベントを受け取ったら、保存済みのローカル時間をシークします。
1. 広告ポリシーインターフェイスで指定した広告の時間を提供します。
1. デフォルトの広告ポリシーセレクターを拡張して、カスタム広告ポリシーセレクターを実装します。
1. `selectAdBreaksToPlay`を実装して、ユーザーに表示する必要のある広告の時間を提供します。

   プレイヤーがPREPAREDステータスになると、すべての広告は既に解決されているので、`AdPolicyInfo.adBreakTimelineItem`プロパティには、ローカル時間の位置より前にあるすべての広告の時間が含まれます。 アプリケーションで、プリロール広告の時間を再生して指定したローカル時間に再開、ミッドロール広告の時間を再生して指定したローカル時間に再開、または広告の時間を再生しないことを決定できます。
