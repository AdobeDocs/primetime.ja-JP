---
description: TVSDKは、ライブストリーミング用のマスターm3u8マニフェストで変更された再生情報を検出し、ストリームの再生中に再生情報を更新できます。 TVSDKは、更新間で重複しないプロファイルビットレートを含め、マスターマニフェストに対してプロファイルの表示/非表示が切り替わる際に、ビットレートプロファイルの動的なセットをサポートします。
seo-description: TVSDKは、ライブストリーミング用のマスターm3u8マニフェストで変更された再生情報を検出し、ストリームの再生中に再生情報を更新できます。 TVSDKは、更新間で重複しないプロファイルビットレートを含め、マスターマニフェストに対してプロファイルの表示/非表示が切り替わる際に、ビットレートプロファイルの動的なセットをサポートします。
seo-title: ライブマスターマニフェストの更新
title: ライブマスターマニフェストの更新
uuid: 44f8adc2-0538-4c5d-8e39-55f661d8540b
translation-type: tm+mt
source-git-commit: 040655d8ba5f91c98ed0584c08db226ffe1e0f4e

---


# ライブマスターマニフェストの更新{#live-master-manifest-update}

TVSDKは、ライブストリーミング用のマスターm3u8マニフェストで変更された再生情報を検出し、ストリームの再生中に再生情報を更新できます。 TVSDKは、更新間で重複しないプロファイルビットレートを含め、マスターマニフェストに対してプロファイルの表示/非表示が切り替わる際に、ビットレートプロファイルの動的なセットをサポートします。

次の機能がサポートされています。

* プロファイル数（増減）
* プロファイルのビットレート（重複または重複しない）
* 同じ（または異なる）サーバー上のURLを持つプロファイル
* 任意のフェイルオーバー構造

次の条件をすべて満たす必要があります。

* ストリームはライブです。
* 時刻とetagの両方が変更されます。
* すべてのレンディション情報は同じままです（URLが異なる場合があります）。
* DRMアクセス情報は同じままです。
* セグメントは、同じPTSおよびフレーム境界の周りに小さなエラー範囲でパッケージ化されます。

## ライブマスターマニフェストの更新アーキテクチャ {#section_32254A0F684B4960ACC33BF6B1AEF6F1}

TVSDKが更新されたマスターマニフェストをどのように受け入れるかに関する情報と例を以下に示します。

デフォルトでは、この機能はオフになっています。 更新頻度を分単位で設定してオンにした場合、更新間隔ごとに次の手順が実行されます。

1. TVSDKは、マスターマニフェストの最終変更時刻とetagをチェックし、ファイルが更新されたかどうかを判断します。

   時刻とetagの両方が変更された場合、ファイルは変更済みと見なされます。
1. TVSDKは、新しいマニフェストを解析および分析し、更新の性質に基づいて適切なアクションを実行します。
1. 現在の再生ビットレートが変更されたマニフェストのビットレートと一致する場合、TVSDKは新しいプロファイルに切り替わります。

   新しいプロファイルは、別のサーバーまたは同じサーバーの同じビットレートで作成できます。 この場合、移行はスムーズです。
1. 現在の再生ビットレートが新しいマニフェストに存在しない場合、TVSDKは、新しいマニフェストにも存在する現在のプロファイル内のビットレートを探します。

   * 一致が見つかった場合、プレイヤーは、最初に既存のマニフェスト内の一致ビットレートプロファイルに切り替え、次に、更新されたマニフェスト内の一致ビットレートプロファイルに切り替えます。 これにより、移行がスムーズになります。
   * 以前のマニフェストと新しいマニフェストとの間にビットレートが共通でない場合、またはTVSDKが一致するビットレートに切り替えられない場合、TVSDKは新しいマニフェストの最も低いビットレートプロファイルに直接切り替え、ABRを使用して帯域幅に基づいて許容ビットレートに切り替えます。 これにより、再生に若干の問題が発生する可能性がありますが、影響は最小限に抑えてください。

1. 更新が成功すると、TVSDKはイベントをディスパッチし `MediaPlayerItemEvent.MASTER_UPDATED` ます。
1. 更新が成功しなかった場合は、この更新の前からセットアップが再生を続行します。

### 例1 {#example_DB55F2B9D98741628C9B973E47A0B6A0}

以下のビットレートはライブ放送中です。

* 500k
* 900k
* 2100k

2100kのストリームに問題があるので、再起動する必要があります。 マスターマニフェストが更新され、500kと900kのみが含まれるようになりました。 その後、2100kでこの番組を視聴しているユーザーは、ビットレートが900kに切り替わります。 900kで視聴しているユーザは、引き続き900kで視聴します。 その後、2100kのストリームが再開され、マスターマニフェストに再度追加されます。 しばらくしてから、900kで視聴し、帯域幅を持つユーザーは2100kに切り替えられます。

### 例2 {#example_485E9A9F373D454CADE5395DEC734E5D}

以下のビットレートはライブ放送中です。

* 500k
* 900k
* 2100k

これらのビットレートはすべて再起動する必要があります。 これに対して設定されている一時ストリームは、400kと1500kの2つです。 ユーザーは、新しい設定で最も低いビットレートである400kに切り替えられます。 十分な帯域幅がある場合、一部のユーザーは1500kに切り替わります。 その後、3つのビットレートがバックアップされ、マスターマニフェストが更新されます。 変更後の（元の）マニフェストで最も低い帯域幅である500kでの視聴に自動的に切り替わります。 しばらくしてから、ユーザーはネットワークで許容される最大の帯域幅（900kまたは1200k）に切り替わります。

## ライブマスターマニフェストの更新の使用 {#section_34AC4A9751DB4B7C8561302C6A59A1C4}

この機能をオンにして、関連イベントを確認できます。

1. ライブマスターマニフェストの更新を有効にするには、プロパティを設定して更新頻度（分単位）を設定 `NetworkConfiguration.masterUpdateInterval` します。
1. オプションで、イベントをリッスンして、成功したマニフェストの更新を追 `MediaPlayerItemEvent.MASTER_UPDATED` 跡します。

