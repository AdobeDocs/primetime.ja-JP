---
description: TVSDKは、ライブビデオストリームのブラックアウトを処理し、ブラックアウト中に代替コンテンツを提供します。
title: ブラックアウトの処理
translation-type: tm+mt
source-git-commit: 89bdda1d4bd5c126f19ba75a819942df901183d1
workflow-type: tm+mt
source-wordcount: '331'
ht-degree: 0%

---


# ブラックアウトを処理{#handle-blackouts}

TVSDKは、ライブビデオストリームのブラックアウトを処理し、ブラックアウト中に代替コンテンツを提供します。

プログラミングブラックアウトに関連する最も一般的な使用例は、プレイヤーアプリが、メインストリームを視聴する資格のないユーザーに代替コンテンツを提供する場合です。 このアプリは、TVSDKを使用して、ブラックアウト期間の開始と終了を決定できます。 このように、ブラックアウト期間の開始時に、再生はメインストリームから代替ストリームに切り替え、ブラックアウト期間が終了したらメインストリームに切り替えることができます。

この使用例に対してソリューションを実装するには：

1. ライブストリームマニフェストのブラックアウトタグをサブスクライブするようにアプリを設定します。

   TVSDKは、ブラックアウトタグを直接認識しませんが、マニフェストファイルの解析中に特定のタグを検出した場合に、アプリケーションが通知をサブスクライブできるようにします。
1. 追加`PTTimedMetadataChangedNotification`の通知リスナーです。

   この通知は、サブスクライブされたタグがマニフェスト内で解析され、新しい`PTTimedMetadata`が準備されるたびにディスパッチされます。

1. フォアグラウンドの`PTTimedMetadata`オブジェクトに対して`onMediaPlayerSubscribedTagIdentified`などのリスナーメソッドを実装します。

1. 再生中に更新があるたびに、`PTMediaPlayerTimeChangeNotification`リスナーを使用して`PTTimedMetadata`オブジェクトを処理します。

1. 追加`PTTimedMetadata`ハンドラー。

   このハンドラーを使用すると、代替コンテンツに切り替えて、`PTTimedMetadata`オブジェクトに指定されたメインコンテンツとその再生時間に戻ることができます。

1. `onSubscribedTagInBackground`を使用して、バックグラウンドで`PTTimedMetadata`オブジェクトのリスナーメソッドを実装します。

   このメソッドは、バックグラウンドストリームのタイミングを監視します。これにより、代替コンテンツからメインコンテンツに切り替えるタイミングを判断できます。

1. バックグラウンドエラーのリスナーメソッドを実装します。
1. ブラックアウト範囲が再生ストリームのDVRに含まれる場合は、シーク不可能範囲を更新します。

   次の場合は、DVRのシーク不可能範囲をアプリケーションで設定する必要があります。

   * ブラックアウトがDVRにある場合に、メインストリームに結合するとき。
   * 代替コンテンツからメインコンテンツに切り替える場合。