---
seo-title: メディアファイルのパッケージ化の概要
title: メディアファイルのパッケージ化の概要
uuid: 9509bcdc-ee4d-4025-9bb6-9b8ac439b926
translation-type: tm+mt
source-git-commit: c78d3c87848943a0be3433b2b6a543822a7e1c15

---


# 概要 {#packaging-media-files-overview}

パッケージ化とは、DRMポリシーを暗号化し、ビデオコンテンツに適用するプロセスを指します。 メディアパッケージAPIを使用して、ファイルをパッケージ化できます。 Primetime DRM Java SDKは、MP4などのプログレッシブダウンロードコンテンツのみをパッケージ化できます。

>[!NOTE]
>
>お使いのメディア形式や使用事例に最も適したパッケージオプションの選択方法については、Primetime DRMの担当者にお問い合わせください。

パッケージ化は、ライセンスサーバーから切り離されます。 パッケージャーがライセンスサーバーに接続して、コンテンツに関する情報を交換する必要はありません。 ライセンスの発行に必要な情報はすべて、コンテンツのメタデータに含まれます。

ファイルが暗号化されると、適切なライセンスがないとその内容が解析されません。 Primetime DRMを使用して、暗号化するファイルの部分を選択できます。 Primetime DRMはビデオコンテンツのファイル形式を解析できるので、ファイル全体ではなく、ファイルの一部をインテリジェントに暗号化できます。 メタデータやキューポイントなどのデータは、検索エンジンがファイルを検索できるように、暗号化されないままにすることができます。

指定したコンテンツ部分に複数のDRMポリシーが含まれる場合があります。 例えば、複数回コンテンツをパッケージ化することなく、様々なビジネスモデルのコンテンツのライセンスを取得できます。 また、短時間の匿名アクセスを許可し、顧客が無制限にアクセスできるようにコンテンツを購入できるようにすることもできます。 複数のDRMポリシーを使用してコンテンツをパッケージ化する場合、ライセンスサーバーは、ライセンスの発行に使用するDRMポリシーを選択するロジックを実装する必要があります。

>[!NOTE] {class=&quot;- topic/note &quot;}
>
>アーキテクチャにより、コンテンツをパッケージ化する際に、使用DRMポリシーを指定し、コンテンツに連結することができます。 クライアントがコンテンツを再生する前に、クライアントは指定したコンピューターのライセンスを取得する必要があります。 ライセンスでは、適用される使用規則を指定し、コンテンツの復号化に使用する必要のあるキーを提供します。 DRMポリシーは、ライセンスを生成するためのテンプレートを表します。 ただし、ライセンスを発行する際に、ライセンスサーバが使用ルールを上書きする場合があります。 有効期限や再生ウィンドウなどの制約により、ライセンスが無効になる場合があります。

Primetime DRMは、CEKに渡すAPIを提供します。 CEKが指定されていない場合、SDKはランダムに生成します。 通常、コンテンツの各セクションに異なるCEKが必要です。 ただし、ダイナミックストリーミングでは、そのコンテンツを構成するすべてのファイルに対して同じCEKを使用することがよくあります。 したがって、あるビットレートから別のビットレートにシームレスに移行するには、1つのライセンスのみが必要です。 複数のコンテンツに同じキーとライセンスを使用する場合は、同じオブジェクトをに渡すか、を使用してCEK `DRMParameters` に渡 `MediaEncrypter.encryptContent()`す必要があります `V2KeyParameters.setContentEncryptionKey()`。 コンテンツの各セクションで異なるキーとライセンスを使用する場合は、各ファイルに新しいインスタンスを作成す `DRMParameters` る必要があります。

キーの回転を使用してコンテンツをパッケージ化する場合、使用する回転キーとキーが変更される頻度を制御できます。 `F4VDRMParameters` インターフ `FLVDRMParameters` ェイスを実装 `KeyRotationParameters` します。 このインターフェイスを使用して、キーの回転を有効にできます。 また、を指定する必要がありま `RotatingContentEncryptionKeyProvider`す。 暗号化された各サンプルに対して、このクラスは使用する回転キーを決定します。 独自のプロバイダーを実装するか、SDKに含まれるプロバイ `TimeBasedKeyProvider` ダーを使用することができます。 この実装では、指定した秒数の後に新しいキーをランダムに生成します。

場合によっては、コンテンツのメタデータを別のファイルとして保存し、コンテンツとは別にクライアントが使用できるようにする必要があります。 その場合は、を呼び出して、オブジェク `MediaEncrypter.encryptContent()`トを返す必要があ `MediaEncrypterResult` ります。 を呼び出 `MediaEncrypterResult.getKeyInfo()` し、結果をにキャストしま `V2KeyStatus`す。 次に、コンテンツのメタデータを取得し、ファイルに保存します。

これらのタスクはすべてJava APIを使用して実行できます。

Java APIにつ *いて詳しくは、* 「Adobe Primetime DRM API Reference」を参照してください。

Media Packagerの *リファレンス実装について詳しくは、* 「Adobe Primetime DRMリファレンスの実装の使用」を参照してください。
