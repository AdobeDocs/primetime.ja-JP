---
description: ライブおよびビデオオンデマンド(VOD)メディアの場合、TVSDKは、中解像度ビットレートに関連付けられているプレイリストをダウンロードして再生し、そのプレイリストで定義されているメディアセグメントをダウンロードします。 高解像度ビットレートプレイリストと関連メディアをすばやく選択し、ダウンロード処理を続行します。
seo-description: ライブおよびビデオオンデマンド(VOD)メディアの場合、TVSDKは、中解像度ビットレートに関連付けられているプレイリストをダウンロードして再生し、そのプレイリストで定義されているメディアセグメントをダウンロードします。 高解像度ビットレートプレイリストと関連メディアをすばやく選択し、ダウンロード処理を続行します。
seo-title: メディアの再生とフェイルオーバー
title: メディアの再生とフェイルオーバー
uuid: 5189cef4-ee09-43b3-ae3d-1052fc535480
translation-type: tm+mt
source-git-commit: 5df9a8b98baaf1cd1803581d2b60c7ed4261a0e8
workflow-type: tm+mt
source-wordcount: '648'
ht-degree: 0%

---


# メディアの再生とフェイルオーバー {#media-playback-and-failover}

ライブおよびビデオオンデマンド(VOD)メディアの場合、TVSDKは、中解像度ビットレートに関連付けられているプレイリストをダウンロードして再生し、そのプレイリストで定義されているメディアセグメントをダウンロードします。 高解像度ビットレートプレイリストと関連メディアをすばやく選択し、ダウンロード処理を続行します。

## プレイリストのフェイルオーバーがありません {#section_4EA0AEFA7FB84FCEA699DFB10B135368}

プレイリスト全体が見つからない場合（例えば、最上位のマニフェストファイルで指定されているM3U8ファイルがダウンロードされない場合）、TVSDKは回復を試みます。 回復できない場合は、次のステップをアプリケーションが決定します。

中解像度ビットレートに関連付けられているプレイリストがない場合、TVSDKは同じ解像度のバリアントプレイリストを検索します。 同じ解像度が見つかった場合、TVSDK開始は、バリアントプレイリストとセグメントを一致する位置からダウンロードします。 プレイヤーが同じ解像度プレイリストを見つけない場合、他のビットレート再生リストとそのバリアントを順に探します。 ビットレートがすぐ下の場合は最初の選択肢で、その次にそのバリアントなどがこれに該当します。 有効なプレイリストを見つけようとして、下位のビットレート再生リストとそのバリアントがすべて使い果たされた場合、TVSDKは最上位のビットレートに移動し、そこからカウントダウンします。 有効なプレイリストが見つからない場合、プロセスは失敗し、プレイヤーはERROR状態に移行します。

この状況の処理方法は、アプリケーションが決定できます。 例えば、プレイヤーアクティビティを閉じて、カタログアクティビティに移動させることができます。 関心のあるイベントは `STATUS_CHANGED` イベントで、対応するコールバックは `onStatusChanged` メソッドです。 以下のコードは、プレイヤーが内部ステータスを次のように変更したかどうかを監視するもので `ERROR`す。

```java
... 
case ERROR: 
getActivity().finish(); // this is where we close the current activity (the Player activity) 
break; 
...
```

## セグメントのフェイルオーバーが見つかりません {#section_D8DF377CCB644D7FB936796DA0CC5A4B}

特定のセグメントが見つからない場合（特定のセグメントのダウンロードに失敗した場合など）、TVSDKは様々なフェイルオーバーを通じて回復を試みます。 回復できない場合は、エラーを発行します。

例えばマニフェストファイルが存在しないためにサーバー上にセグメントが見つからない場合、セグメントをダウンロードできず、その他の理由で、TVSDKは次のオプションを試みてフェイルオーバーを試みます。

1. バリアントファイル内の同じビットレートで、同じセグメントへのフェイルオーバーを試みます。
1. 同じファイル内の代替ビットレートに切り替えます（ABRスイッチ）。
1. 使用可能なすべてのバリアント内の使用可能なすべてのビットレートを順に調べます。
1. セグメントをスキップして警告を発行します。

代替セグメントを取得できない場合、TVSDKは `CONTENT_ERROR` エラー通知をトリガーします。 この通知には、コードの付いた内部通知が含まれ `DOWNLOAD_ERROR` ます。 問題のあるストリームが代替オーディオトラックの場合、TVSDKはエラー `AUDIO_TRACK_ERROR` 通知を生成します。

ビデオエンジンが引き続きセグメントを取得できない場合、セグメントの連続スキップ回数は5に制限されます。5に制限された後で、再生が停止し、TVSDKがコード5 `NATIVE_ERROR` を発行します。

>[!NOTE]
>
>次に、注意が必要な制限を示します。
>
>* 可変ビットレート(ABR)制御パラメーターは、フェイルオーバーが発生した場合には考慮されません。
>
>  
これは、フェイルオーバーメカニズムが、ビットレートのプロファイルに関係なく、現在使用可能なプレイリストのいずれかをバックアップストリームとして使用するように設計されているためです。
>* フェイルオーバー操作中は、プロファイルスイッチが存在する可能性があります。
>
>  
プレイリストセグメントの1つのダウンロード中にエラーが発生した場合、最小/最大許容ビットレートなどのABR制御パラメーターは無視されます。


