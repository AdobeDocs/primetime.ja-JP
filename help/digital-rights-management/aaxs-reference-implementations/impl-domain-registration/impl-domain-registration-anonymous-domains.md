---
title: 匿名ドメイン
description: 匿名ドメイン
copied-description: true
source-git-commit: 02ebc3548a254b2a6554f1ab34afbb3ea5f09bb8
workflow-type: tm+mt
source-wordcount: '380'
ht-degree: 0%

---

# 匿名ドメイン {#anonymous-domains}

この使用例では、多数のデバイスが 1 つのドメインに属しているので、認証が不要な場合があります。 参照実装でこのタイプのドメインを使用するには、ドメイン登録が必要であることを指定するポリシーを作成します。 ドメインサーバー URL を次のように指定します。 `https:// host:port/flashaccess/domainserver/domainname/` 匿名認証を指定します。

参照実装は、ドメイン登録に次のロジックを実装します。

1. 要求 URL からドメイン名を解析します。
1. ドメイン名を `DomainServerInfo` 表。 エントリが見つからない場合は、エントリをテーブルに挿入します（デフォルト値：認証は不要で、メンバーシップの最大値は不要）。
1. リクエストされたドメインに認証が必要な場合は、有効な認証トークンがリクエストに含まれていることを確認し、データベースで指定されている場合は認証名前空間と一致させます。

   1. 認証が必要で、有効な認証トークンが指定されていない場合は、エラーを返します。 `DOM_AUTHENTICATION_REQUIRED (503)`.

1. デバイスが既にドメインに登録されているかどうかを確認します。

   1. ドメイン名を `DomainMembership` 表。 見つかった各マシン GUID について、リクエスト内のマシン GUID と比較します。 これが新しいマシンの場合、 `DomainMembership` 表。

   1. 新しいデバイスで、最大メンバーシップに既に達している場合は、エラーを返します。 `DOM_LIMIT_REACHED (502)`.

1. 内のこのドメインのすべてのドメインキーを参照します。 `DomainKeys` 表。

   1. 次の場合 `DomainServerInfo` キーをロールオーバーし、新しいキーペアを生成して、 `DomainKeys` テーブル（キーのバージョンが、最も高い既存のキーよりも 1 つ高い）、 `Key Rollover Required` 旗を立てる `DomainServerInfo`.

   1. 各ドメインキーに対して、ドメインの資格情報を生成します。

参照実装により、ドメインの登録解除に次のロジックが実装されます。

1. 要求 URL からドメイン名を解析します。
1. で要求されたドメイン名を参照します。 `DomainServerInfo` 表。
1. リクエストされたドメインに認証が必要な場合は、有効な認証トークンがリクエストに含まれていることを確認し、データベースで指定されている場合は認証名前空間と一致させます。
1. のドメイン名とマシン GUID を参照します。 `DomainMembership` 表。 一致するエントリが見つからない場合は、エラーを返します。 `DEREG_DENIED (401)`.

1. これがプレビューリクエストでない場合は、 `DomainMembership` をクリックし、 `Key Rollover Required` 旗を立てる `DomainServerInfo`.

この使用例では、多数のマシンがドメインに参加する可能性があるので、マシン ID を完全に一致させることはできません。 代わりに、個別化時にマシンに割り当てられたランダムマシン GUID が使用されます。
