---
description: Adobe Primetime DRM Professionalを使用する場合は、ライセンスを事前生成し、コンテンツにライセンスを埋め込むことができます。 この機能は拡張ライセンスチェーンと組み合わせて使用できます。例えば、リーフライセンスが事前に生成され、コンテンツに埋め込まれ、クライアントはライセンスサーバーからRootライセンス（マシンまたはドメインにバインド）を要求できます。 また、クライアントアプリケーションは、デバイスがサーバに事前登録され、サーバがそのデバイスに連結されたライセンスを事前生成し、クライアントが単純なHTTP Webサーバからライセンスを取得するワークフローを実装できます。
seo-description: Adobe Primetime DRM Professionalを使用する場合は、ライセンスを事前生成し、コンテンツにライセンスを埋め込むことができます。 この機能は拡張ライセンスチェーンと組み合わせて使用できます。例えば、リーフライセンスが事前に生成され、コンテンツに埋め込まれ、クライアントはライセンスサーバーからRootライセンス（マシンまたはドメインにバインド）を要求できます。 また、クライアントアプリケーションは、デバイスがサーバに事前登録され、サーバがそのデバイスに連結されたライセンスを事前生成し、クライアントが単純なHTTP Webサーバからライセンスを取得するワークフローを実装できます。
seo-title: 事前生成ライセンス
title: 事前生成ライセンス
uuid: aa7d5038-5a9b-40a2-a240-266622158b43
translation-type: tm+mt
source-git-commit: 29bc8323460d9be0fce66cbea7c6fce46df20d61

---


# 事前生成ライセンス {#pre-generating-licenses}

Adobe Primetime DRM Professionalを使用する場合は、ライセンスを事前生成し、コンテンツにライセンスを埋め込むことができます。 この機能は拡張ライセンスチェーンと組み合わせて使用できます。例えば、リーフライセンスが事前に生成され、コンテンツに埋め込まれ、クライアントはライセンスサーバーからRootライセンス（マシンまたはドメインにバインド）を要求できます。 また、クライアントアプリケーションは、デバイスがサーバに事前登録され、サーバがそのデバイスに連結されたライセンスを事前生成し、クライアントが単純なHTTP Webサーバからライセンスを取得するワークフローを実装できます。

ライセンスを事前生成する場合は、を使用してのインスタ `com.adobe.flashaccess.sdk.license.pregen.LicenseFactory.getInstance()` ンスを取得する必要がありま `LicenseFactory`す。 このファクトリで生成されたライセンスに署名するには、ライセンスサーバーの資格情報を指定する必要があります。 このクラスは、ライセンスチェーンなしでのLeafライセンスの生成と、拡張ライセンスチェーンを使用したLeafライセンスとRootライセンスの生成 [をサポートしていま](../../protecting-content/implementing-the-license-server/license-chaining/gen-enhanced-license-chaining.md)す。

リーフライセンスを生成する場合は、適用するコンテンツメタデータを指定する必要がありま `initContentInfo()`す。 メタデータに複数のDRMポリシーが含まれる場合、またはメタデータに含まれていないDRMポリシーを使用する場合は、を使用してDRMポリシーを指定し、ライセンスを生成する `setSelectedPolicy()` 必要があります。 DRMポリシー更新リストを使用してDRMポリシーの更新を追跡する場合、でメタデータを初期化する前に、DRMポリシー更新リストをライセンスファクトリに提供できま `setPolicyUpdateList()`す。

Rootライセンスを生成する場合は、前述の説明に従ってコンテンツのメタデータを指定する必要があります。 また、メタデータの代わりにDRMポリシー()とライセンスサー `setSelectedPolicy()`バーのURL()を適用して、Rootライセンスを生 `setLicenseServerURL()`成することもできます。

>[!NOTE] {class=&quot;- topic/note &quot;}
>
>クライアントがライセンスを要求できるAdobe Primetime DRMライセンスサーバーがない場合でも、ライセンスサーバーのURLが必要です。 この場合、ライセンスサーバのURLには、ライセンスの発行者を識別するURLを指定する必要があります。

DRMポリシーで拡張ライセンスチェーンを使用する場合は、DRMポリシー( `setRootKeyRetrievalInfo()`)のルート暗号化キーを復号化するライセンスサーバーの秘密鍵証明書を指定する必要があります。

DRMポリシーでドメインバインドライセンスが必要な場合は、を使用して、ライセンスサーバーがド `setDomainCAs()` メイントークンを受け入れるドメイン発行者を指定する必要があります。 ライセンスの受信者を検証するには、1つ以上のドメインCA証明書を指定する必要があります。

DRMポリシーでiOSデバイスのリモートキー配信が必要な場合は、チェーンリーフが生成されない限り、適用してキーサーバー証明書 `setKeyServerCertificate()` を指定する必要があります。

ライセンスを生成する場合は、ライセンスの種類(リーフまたはル `generateLicense()` ート)と1つ以上の受信者証明書を呼び出して指定する必要があります。 受信者の証明書は、DRMポリシーで指定された要件に応じて、コンピューターの証明書またはドメインの証明書を表します。 連結されたリーフを生成する場合、受信者は不要です。 ライセンスが生成された後、DRMポリシーで指定された使用ルールを上書きできます。 最後に、を呼び出して、ライセ `signLicense()` ンスに署名し、のインスタンスを取得する必要がありま `PreGeneratedLicense`す。 ライセンスを保存できるようになりました(を使用して、シリア `getBytes()` ライズされたライセンスを取得するか、暗号化されたコンテンツに埋め込みます)。

詳しくは、ライ [センスの埋め込みを参照してくださ](../../protecting-content/pre-generating-and-embedded-licenses/embedding-licenses.md)い。

事前生成 `com.adobe.flashaccess.samples.licensegen.GenerateLicense` ライセンスのデモ方法のサンプルコードについては、『リファレンス実装コマンドラインツール』の「samples」ディレクトリを参照してください。
