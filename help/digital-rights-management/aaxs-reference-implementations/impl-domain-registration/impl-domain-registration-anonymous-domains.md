---
seo-title: 匿名ドメイン
title: 匿名ドメイン
uuid: ee29ae4d-65b2-48de-b441-18c8cf55de32
translation-type: tm+mt
source-git-commit: 4f196bbd079edeb1a423afee6b4b7e249d380f40
workflow-type: tm+mt
source-wordcount: '380'
ht-degree: 0%

---


# 匿名ドメイン{#anonymous-domains}

この場合、多数のデバイスが1つのドメインに属し、認証が必要でない場合があります。 参照実装でこの種類のドメインを使用するには、ドメイン登録が必要であることを指定するポリシーを作成します。 ドメインサーバーのURLを`https:// host:port/flashaccess/domainserver/domainname/`として指定し、匿名認証を指定します。

参照の実装では、ドメイン登録の次のロジックが実装されます。

1. 要求URLからドメイン名を解析します。
1. `DomainServerInfo`テーブルのドメイン名を参照します。 エントリが見つからない場合は、テーブルにエントリを挿入します(デフォルト値：認証は必須ではなく、メンバーシップの上限はありません)。
1. 要求されたドメインに認証が必要な場合は、有効な認証トークンが要求に含まれていることを確認し、データベースで指定されている場合はAuth名前空間と一致していることを確認します。

   1. 認証が必要で、有効な認証トークンが指定されていない場合は、エラー`DOM_AUTHENTICATION_REQUIRED (503)`を返します。

1. デバイスが既にドメインに登録されているかどうかを確認します。

   1. `DomainMembership`テーブルのドメイン名を参照します。 見つかった各マシンのGUIDについて、要求内のマシンのGUIDと比較します。 これが新しいマシンの場合は、`DomainMembership`テーブルにエントリを追加します。

   1. 新しいデバイスで、Max Membershipに既に到達している場合は、エラー`DOM_LIMIT_REACHED (502)`を返します。

1. `DomainKeys`テーブルで、このドメインのすべてのドメインキーを参照します。

   1. `DomainServerInfo`がキーのロールオーバーを必要と指示した場合は、新しいキーペアを生成し、`DomainKeys`テーブルに保存して（キーのバージョンが最も高い既存のキーよりも1つ高い）、`DomainServerInfo`の`Key Rollover Required`フラグをリセットします。

   1. 各ドメインキーに対して、ドメイン秘密鍵証明書を生成します。

このリファレンスの実装では、ドメインの登録解除のために次のロジックが実装されています。

1. 要求URLからドメイン名を解析します。
1. `DomainServerInfo`テーブル内の要求されたドメイン名を参照します。
1. 要求されたドメインに認証が必要な場合は、有効な認証トークンが要求に含まれていることを確認し、データベースで指定されている場合はAuth名前空間と一致していることを確認します。
1. `DomainMembership`テーブルのドメイン名とマシンGUIDを参照します。 一致するエントリが見つからない場合は、エラー`DEREG_DENIED (401)`を返します。

1. これがプレビューリクエストでない場合は、`DomainMembership`からエントリを削除し、`DomainServerInfo`に`Key Rollover Required`フラグを設定します。

この場合、多数のマシンがドメインに参加する可能性があるので、マシンIDを完全に一致させることはできません。 代わりに、個別化の際にマシンに割り当てられたランダムなマシンGUIDが使用されます。
