---
description: マニフェストサーバーは、コンテンツの提供、広告の提供、ビデオの再生、広告の追跡を行うシステムを調整します。 このサービスは、クライアントビデオプレーヤーがコンテンツプロバイダーから受け取るM3U8エンコードされた再生リスト（マニフェスト）を受け取り、広告プロバイダーから広告をマニフェストにステッチし、ステッチされたマニフェストをビデオプレーヤーに渡します。 クライアント側とサーバー側の両方の広告トラッキングをサポートします。 HTTPベースのWebサービスインターフェイスを使用して操作を実行します。
title: マニフェストサーバーの操作の概要
translation-type: tm+mt
source-git-commit: 89bdda1d4bd5c126f19ba75a819942df901183d1
workflow-type: tm+mt
source-wordcount: '584'
ht-degree: 0%

---


# マニフェストサーバーの操作の概要{#overview-of-manifest-server-interactions}

マニフェストサーバーは、コンテンツの提供、広告の提供、ビデオの再生、広告の追跡を行うシステムを調整します。 このサービスは、クライアントビデオプレーヤーがコンテンツプロバイダーから受け取るM3U8エンコードされた再生リスト（マニフェスト）を受け取り、広告プロバイダーから広告をマニフェストにステッチし、ステッチされたマニフェストをビデオプレーヤーに渡します。 クライアント側とサーバー側の両方の広告トラッキングをサポートします。 HTTPベースのWebサービスインターフェイスを使用して操作を実行します。

一般的な設定には、次のものが含まれます。

* Primetimeマニフェストサーバー
* Primetime Creative Repackaging Service(CRS)
* ビデオプレーヤーの制御を行うクライアント
* 発行者(通常、コンテンツ管理システム(CMS)を持つ)
* コンテンツ配信ネットワーク(CDN)
* 広告サーバー
* 広告トラッキングレポートの受信者

ワークフローは、CDNがAkamaiの場合や、クライアントが広告トラッキングを実行している場合など、様々な要因に応じて異なります。 クライアント側広告追跡のワークフローの図については、[クライアント側追跡ワークフロー](/help/primetime-ad-insertion/~old-msapi-topics/ms-at-effectiveness/notvsdk-csat-overview.md#section_cst_flow)を参照してください。

マニフェストサーバーは、HTTPGET要求を受信し、応答することで、ビデオ配信クライアントと対話します。 応答は、広告の繋ぎ合わせコンテンツを記述するM3U8エンコードされたマニフェストです。オプションで、詳細な広告追跡命令を含むJSONまたはVMAP構造(sidecar)を含みます（[ファイル形式](/help/primetime-ad-insertion/~old-msapi-topics/ms-list-file-formats/ms-api-file-formats.md)を参照）。

一般的なワークフローは次のようになります。

1. パブリッシャーは、コンテンツURLと広告サーバーの情報をクライアントに送信します。
1. クライアントは、パブリッシャーからの情報を使用してマニフェストサーバーURLを生成し、そのURLにGETリクエストを送信します。 これはBootstrapURLと呼ばれます。
1. マニフェストサーバーは、クライアントとのセッションを確立します。
1. マニフェストサーバーは、CDNからコンテンツマニフェストを取得します。このCDNには広告ブレーク情報が含まれる場合があります。
1. マニフェストサーバーは、クライアント用に生成されたマスター/バリアントマニフェストにクライアントをリダイレクトします。

   >[!NOTE]
   >
   >BootstrapURLクエリーのパラメーターに`pttrackingmode=simple`または`ptplayer=ios-mobileweb`の設定が含まれる場合、マニフェストサーバーはJSONオブジェクトでマスター/バリアントマニフェストURLを返し、クライアントはそのバリアントマニフェストURLにGET要求を送信します。

1. クライアントは、生成されたバリアントマニフェスト内のストリームを選択して再生し、広告情報をマニフェストサーバーに送信します。
1. マニフェストサーバーは、クライアントが提供した情報を広告サーバーに渡し、広告サーバーから広告と広告追跡URLを受け取ります。 指定された広告がHLS形式でない場合、マニフェストサーバーはHLSへの変換のためにCRSに送信します。
1. マニフェストサーバーは広告をコンテンツマニフェストにステッチし、新しいステッチマニフェストをクライアントに送信します。
1. クライアントは、ステッチイン広告でコンテンツを再生し、指定された時間に指定された追跡URLにリクエストを行います。

Primetime ad insertionは、多くのビデオ配信プラットフォームでクライアントをサポートします。 すべてのクライアントがPrimetime TVSDKパッケージに基づいて構築されているわけではありませんが、すべてのクライアントが同じ基本URLにGETリクエストを送信します。 クエリパラメーターは、マニフェストサーバーに次のように伝えることで、1つのクライアントリクエストを別のクライアントリクエストと区別します。

* どの顧客がリクエストを行っているか
* 依頼人が何を望んでいるか
* および提供する広告追跡情報。

## CORS {#section_BEA7F298660944BE92801E4C82FCD038}

マニフェストサーバーは、接触チャネル間のリソース共有標準(CORS)を使用します。 受け取るリクエストの`Origin`ヘッダを探します。 ヘッダーが存在する場合、

* `Access-Control-Allow-Origin: *`接触チャネルのヘッダーからの文字列`*`
* `Access-Control-Allow-Credentials: true`
* `Access-Control-Allow-Methods: GET`

そうでない場合、次のように返されます。

* `Access-Control-Allow-Origin: *`
* `Access-Control-Allow-Methods: GET`