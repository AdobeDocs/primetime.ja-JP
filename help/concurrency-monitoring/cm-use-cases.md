---
title: 使用例
description: 同時実行監視の使用例。
source-git-commit: ac0c15b951f305e29bb8fa0bd45aa2c53de6ad15
workflow-type: tm+mt
source-wordcount: '387'
ht-degree: 0%

---


# 使用例 {#use-cases}

ストリームカウントサービスの主な使用例は、ユーザーが視聴した同時ビデオストリームの数をカウントし、同じアカウント ID の同時使用に関する決定を提供することです。

購読者別の使用状況を監視するには、プログラマーの Web サイトやアプリケーション、MVPD のコンテンツポータル、シンジケートプロパティのどちらで発生しているかに関係なく、ユーザーアクティビティを集計できる一元化されたサービスが必要です。

この一元化されたサービスでサポートされる主な使用例は次のとおりです。

1. 購読者がビデオの視聴を開始すると、アプリケーションはすぐに **ストリーミングセッションを初期化** を起動し、 **レポートアクティビティ** データ。
1. 同じ中央サービス内で、別のインスタンスが ***CM の決定***  — アプリケーションが CM サービスに 1 つ以上のポリシーを登録している場合、サービスは、現在のアクティビティに基づくアクセス決定で応答します。


## セッションの作成 {#create-session}

この API 呼び出しを使用すると、ユーザーが「再生」ボタンを押して一部のコンテンツを視聴したときに、クライアントは新しい CM セッションを作成できます。 サーバーの応答には、ストリームを有効に保つための新しいストリーム URL（ストリーム ID を含む）と、ストリームがタイムアウトする時間が含まれます。 クライアントアプリケーションは、ハートビートを通じてアクティビティを報告することが期待されます。 セッション初期化呼び出しでは、メタデータを、フォームデータ（またはクエリー文字列パラメーター）として送信されるキーと値のペアの形式で含める必要があります。 さらに、応答には、再生が「ポリシーに準拠」しているかどうかを示すフラグも含まれます。 そうでない場合、再生は許可されません。

## レポートアクティビティ {#reporting-activity}

セッションを作成したら、そのストリームがアクティブなままになるために、アプリケーションはハートビートを定期的に送信する必要があります。 また、ユーザーが再生を停止すると、ストリームはタイムアウトするまでアクティブとしてカウントされないように、クライアントアプリでストリームを停止することをお勧めします。

ハートビート呼び出しの応答により、クライアントアプリケーションは（ポリシーに準拠している場合）ビデオの再生を続行できるようにしたり、ビデオ再生を停止するように指示したりできます。 ビデオストリームが準拠していない場合、クライアントアプリケーションはビデオストリームを停止する必要があります。 応答は、ユーザーが再生を続行するためにクライアントアプリケーションがエラーメッセージや使用可能なアクションを表示するための情報を提供します。
