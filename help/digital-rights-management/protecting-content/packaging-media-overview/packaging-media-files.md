---
title: メディアファイルのパッケージ化の概要
description: メディアファイルのパッケージ化の概要
copied-description: true
translation-type: tm+mt
source-git-commit: 89bdda1d4bd5c126f19ba75a819942df901183d1
workflow-type: tm+mt
source-wordcount: '663'
ht-degree: 0%

---


# 概要{#packaging-media-files-overview}

パッケージ化とは、DRMポリシーを暗号化してビデオコンテンツに適用するプロセスのことです。 メディアパッケージAPIを使用してファイルをパッケージ化できます。 Primetime DRM Java SDKは、MP4などのプログレッシブダウンロードコンテンツのみをパッケージ化できます。

>[!NOTE]
>
>お使いのメディア形式や使用例に最も適したパッケージ化オプションの選択方法については、Primetime DRMの担当者にお問い合わせください。

パッケージは、ライセンスサーバーから分離されます。 パッケージャーがライセンスサーバーに接続してコンテンツに関する情報を交換する必要はありません。 ライセンスの発行に必要なライセンスサーバーの知識がすべて、コンテンツのメタデータに含まれます。

ファイルを暗号化すると、適切なライセンスがないと、ファイルの内容が解析されません。 Primetime DRMを使用して、暗号化するファイルの部分を選択できます。 Primetime DRMはビデオコンテンツのファイル形式を解析できるので、ファイル全体ではなく、ファイルの一部をインテリジェントに暗号化できます。 メタデータやキューポイントなどのデータは、暗号化されないままで、検索エンジンがファイルを検索できるようにすることができます。

指定したコンテンツ部分に複数のDRMポリシーが含まれる場合があります。 例えば、コンテンツを複数回パッケージ化することなく、異なるビジネスモデルのコンテンツをライセンス認証できます。 また、匿名アクセスを短時間許可した後で、ユーザーがコンテンツを購入して無制限にアクセスできるようにすることもできます。 複数のDRMポリシーを使用してコンテンツをパッケージ化する場合、ライセンスサーバーは、ライセンスの発行に使用するDRMポリシーを選択するロジックを実装する必要があります。

>[!NOTE]
>
>このアーキテクチャにより、使用DRMポリシーを指定し、コンテンツをパッケージ化する際にコンテンツに連結することができます。 クライアントがコンテンツを再生する前に、クライアントは指定したコンピューターのライセンスを取得する必要があります。 ライセンスは、適用される使用規則を指定し、コンテンツの復号化に使用する必要があるキーを提供します。 DRMポリシーは、ライセンスを生成するためのテンプレートを表します。 ただし、ライセンスを発行する場合、ライセンスサーバが使用ルールを上書きする場合があります。 有効期限や再生時間などの制約によって、ライセンスが無効になる場合があります。

Primetime DRMは、CEKを渡すためのAPIを提供します。 CEKが指定されていない場合、SDKがランダムに生成します。 通常、コンテンツのセクションごとに異なるCEKが必要です。 ただし、Dynamic Streamingでは、そのコンテンツを構成するすべてのファイルに対して同じCEKを使用することが考えられます。 したがって、あるビットレートから別のビットレートにシームレスにトランジションするには、1つのライセンスのみが必要です。 複数のコンテンツに同じキーとライセンスを使用する場合は、同じ`DRMParameters`オブジェクトを`MediaEncrypter.encryptContent()`に渡すか、`V2KeyParameters.setContentEncryptionKey()`を使用してCEKに渡す必要があります。 コンテンツのセクションごとに異なるキーとライセンスを使用する場合は、ファイルごとに新しい`DRMParameters`インスタンスを作成する必要があります。

キー回転を使用してコンテンツをパッケージ化する場合、使用する回転キーとキーの変更頻度を制御できます。 `F4VDRMParameters` インター `FLVDRMParameters` フェイスを `KeyRotationParameters` 実装します。このインターフェイスを使用して、キーの回転を有効にできます。 また、`RotatingContentEncryptionKeyProvider`を指定する必要があります。 暗号化された各サンプルに対して、使用する回転キーを決定するクラスです。 独自のプロバイダーを実装するか、SDKに含まれる`TimeBasedKeyProvider`を使用します。 この実装では、指定した秒数の経過後、ランダムに新しいキーが生成されます。

場合によっては、コンテンツのメタデータを別のファイルとして保存し、コンテンツとは別のクライアントでメタデータを使用できるようにする必要があります。 その場合は、`MediaEncrypter.encryptContent()`を呼び出して`MediaEncrypterResult`オブジェクトを返す必要があります。 `MediaEncrypterResult.getKeyInfo()`を呼び出し、結果を`V2KeyStatus`にキャストします。 次に、コンテンツのメタデータを取得し、ファイルに保存します。

これらのタスクはすべてJava APIを使用して実行できます。

Java APIについて詳しくは、*Adobe PrimetimeDRM APIリファレンス*&#x200B;を参照してください。

Media Packagerの参照実装について詳しくは、「*Adobe PrimetimeDRM参照実装の使用*」を参照してください。
