---
description: Adobe PrimetimeDRM Professionalを使用する場合は、ライセンスを事前に生成し、コンテンツにライセンスを埋め込むことができます。 この機能は拡張ライセンスチェーンと組み合わせることができます。拡張ライセンスチェーンと組み合わせて使用すると、リーフライセンスが事前に生成され、コンテンツに埋め込まれ、クライアントはRootライセンス（マシンまたはドメインにバインド）をライセンスサーバーから要求できます。 また、クライアントアプリケーションは、デバイスがサーバに事前登録され、サーバがそのデバイスに連結されたライセンスを事前生成し、クライアントが単純なHTTPウェブサーバからライセンスを取得するワークフローを実装できます。
seo-description: Adobe PrimetimeDRM Professionalを使用する場合は、ライセンスを事前に生成し、コンテンツにライセンスを埋め込むことができます。 この機能は拡張ライセンスチェーンと組み合わせることができます。拡張ライセンスチェーンと組み合わせて使用すると、リーフライセンスが事前に生成され、コンテンツに埋め込まれ、クライアントはRootライセンス（マシンまたはドメインにバインド）をライセンスサーバーから要求できます。 また、クライアントアプリケーションは、デバイスがサーバに事前登録され、サーバがそのデバイスに連結されたライセンスを事前生成し、クライアントが単純なHTTPウェブサーバからライセンスを取得するワークフローを実装できます。
seo-title: 事前生成ライセンス
title: 事前生成ライセンス
uuid: aa7d5038-5a9b-40a2-a240-266622158b43
translation-type: tm+mt
source-git-commit: 1b9792a10ad606b99b6639799ac2aacb707b2af5
workflow-type: tm+mt
source-wordcount: '704'
ht-degree: 0%

---


# 事前生成ライセンス {#pre-generating-licenses}

Adobe PrimetimeDRM Professionalを使用する場合は、ライセンスを事前に生成し、コンテンツにライセンスを埋め込むことができます。 この機能は拡張ライセンスチェーンと組み合わせることができます。拡張ライセンスチェーンと組み合わせて使用すると、リーフライセンスが事前に生成され、コンテンツに埋め込まれ、クライアントはRootライセンス（マシンまたはドメインにバインド）をライセンスサーバーから要求できます。 また、クライアントアプリケーションは、デバイスがサーバに事前登録され、サーバがそのデバイスに連結されたライセンスを事前生成し、クライアントが単純なHTTPウェブサーバからライセンスを取得するワークフローを実装できます。

ライセンスを事前生成する場合は、を使用してのインスタンス `com.adobe.flashaccess.sdk.license.pregen.LicenseFactory.getInstance()` を取得する必要があり `LicenseFactory`ます。 このファクトリによって生成されるライセンスに署名するには、License Server資格情報を指定する必要があります。 このクラスは、ライセンスチェーンなしでのリーフライセンスの生成をサポートし、 [拡張ライセンスチェーンを使用したリーフライセンスとルートライセンス](../../protecting-content/implementing-the-license-server/license-chaining/gen-enhanced-license-chaining.md)。

リーフライセンスを生成する場合、適用するコンテンツメタデータを指定する必要があり `initContentInfo()`ます。 メタデータに複数のDRMポリシーが含まれる場合、またはメタデータに含まれていないDRMポリシーを使用する場合は、を使用してDRMポリシーを指定してライセンスを生成する必要があります。 `setSelectedPolicy()` DRMポリシーの更新リストを使用してDRMポリシーの更新を追跡する場合は、でメタデータを初期化する前に、DRMポリシーの更新リストをライセンスファクトリに提供でき `setPolicyUpdateList()`ます。

Rootライセンスを生成する場合は、上記の説明に従ってコンテンツのメタデータを指定する必要があります。 または、メタデータの代わりにDRMポリシー( `setSelectedPolicy()`)とライセンスサーバーURL( `setLicenseServerURL()`)を適用して、Rootライセンスを生成できます。

>[!NOTE]
>
>クライアントがライセンスを要求できるAdobe PrimetimeDRMライセンスサーバーがない場合でも、ライセンスサーバーURLが必要です。 この場合、License ServerのURLには、ライセンス発行者を識別するURLを指定する必要があります。

DRMポリシーで拡張ライセンスチェーンを使用する場合は、DRMポリシー( `setRootKeyRetrievalInfo()`)のルート暗号化キーを復号化するためのライセンスサーバーの秘密鍵証明書を指定する必要があります。

DRMポリシーでドメインバウンドライセンスが必要な場合、を使用して、ライセンスサーバーがドメイントークンを受け入れるドメイン発行者 `setDomainCAs()` を指定する必要があります。 ライセンス受信者を検証するには、1つ以上のドメインCA証明書を指定する必要があります。

iOSデバイスに対してDRMポリシーでリモートキーの配信が必要な場合は、Chained Leafが生成されていない限り、適用してキーサーバー証明書を指定する必要がありま `setKeyServerCertificate()` す。

ライセンスを生成する場合は、を呼び出して、ライセンスの種類（リーフまたはルート） `generateLicense()` と1つ以上の受信者証明書を指定する必要があります。 受信者証明書は、DRMポリシーで指定された要件に応じて、コンピューター証明書またはドメイン証明書を表します。 連結リーフを生成する場合、受信者は必要ありません。 ライセンスが生成されたら、DRMポリシーで指定された使用規則を上書きできます。 最後に、を呼び出してライセンス `signLicense()` に署名し、のインスタンスを取得する必要があり `PreGeneratedLicense`ます。 ライセンスを保存できるようになりました(シリアライズ済みのライセンスを取得す `getBytes()` るために使用するか、暗号化されたコンテンツに埋め込むために使用します)。

詳しくは、ライセンスの [埋め込みを参照してください](../../protecting-content/pre-generating-and-embedded-licenses/embedding-licenses.md)。

事前生成されたライセンス `com.adobe.flashaccess.samples.licensegen.GenerateLicense` のデモ方法に関するサンプルコードについては、リファレンス実装のコマンドラインツールの「samples」ディレクトリを参照してください。
